<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Readability Score Checker | School Tools Hub</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap");

      :root {
        --primary: #58a6ff;
        --primary-hover: #1f6feb;
        --bg-dark: #0d1117;
        --bg-card: #161b22;
        --text-light: #c9d1d9;
        --text-muted: #8b949e;
        --border: #30363d;
        --shadow: rgba(88, 166, 255, 0.2);
        --danger: #f85149;
        --success: #56d364;
        --warning: #e3b341;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Poppins", sans-serif;
        background: var(--bg-dark);
        color: var(--text-light);
        padding: 20px;
        transition: all 0.3s ease;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      .theme-toggle {
        position: absolute;
        top: 20px;
        right: 20px;
        background: transparent;
        border: 1px solid var(--border);
        color: var(--text-light);
        padding: 8px 12px;
        border-radius: 20px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        z-index: 100;
      }

      .theme-toggle:hover {
        background: rgba(255, 255, 255, 0.1);
      }

      .container {
        max-width: 1000px;
        margin: 40px auto;
        background: var(--bg-card);
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        border: 1px solid var(--border);
        flex-grow: 1;
        position: relative;
      }

      .back-btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        color: var(--text-muted);
        text-decoration: none;
        margin-bottom: 20px;
        transition: all 0.3s ease;
      }

      .back-btn:hover {
        color: var(--primary);
      }

      h1 {
        text-align: center;
        color: var(--primary);
        margin-bottom: 10px;
        font-size: 2.2rem;
      }

      .description {
        text-align: center;
        color: var(--text-muted);
        margin-bottom: 30px;
        line-height: 1.6;
      }

      .textarea-container {
        position: relative;
        margin-bottom: 20px;
      }

      .text-input {
        width: 100%;
        min-height: 200px;
        padding: 15px;
        border-radius: 8px;
        border: 1px solid var(--border);
        background: var(--bg-dark);
        color: var(--text-light);
        font-family: "Poppins", sans-serif;
        font-size: 1rem;
        line-height: 1.6;
        resize: vertical;
        transition: all 0.3s ease;
      }

      .text-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 2px var(--shadow);
      }

      .clear-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        background: rgba(248, 81, 73, 0.2);
        color: var(--danger);
        border: none;
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.8rem;
        transition: all 0.3s ease;
      }

      .clear-btn:hover {
        background: rgba(248, 81, 73, 0.3);
      }

      .analyze-btn {
        display: block;
        width: 100%;
        padding: 12px;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 30px;
      }

      .analyze-btn:hover {
        background: var(--primary-hover);
        transform: scale(1.02);
      }

      .tabs {
        display: flex;
        border-bottom: 1px solid var(--border);
        margin-bottom: 20px;
        overflow-x: auto;
        scrollbar-width: thin;
      }

      .tab {
        padding: 10px 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        border-bottom: 2px solid transparent;
        white-space: nowrap;
      }

      .tab.active {
        border-bottom: 2px solid var(--primary);
        color: var(--primary);
        font-weight: 500;
      }

      .tab:hover:not(.active) {
        background: rgba(255, 255, 255, 0.05);
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      .results-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .result-card {
        background: var(--bg-dark);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 20px;
        transition: all 0.3s ease;
      }

      .result-card:hover {
        border-color: var(--primary);
        transform: translateY(-3px);
      }

      .result-title {
        font-size: 1.1rem;
        color: var(--primary);
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .result-value {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 5px;
      }

      .result-description {
        color: var(--text-muted);
        font-size: 0.9rem;
        line-height: 1.5;
      }

      .score-good {
        color: var(--success);
      }

      .score-medium {
        color: var(--warning);
      }

      .score-poor {
        color: var(--danger);
      }

      .analysis-section {
        background: var(--bg-dark);
        border-radius: 8px;
        border: 1px solid var(--border);
        padding: 20px;
        margin-bottom: 20px;
      }

      .analysis-title {
        font-size: 1.2rem;
        color: var(--primary);
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .analysis-content {
        line-height: 1.6;
      }

      .analysis-list {
        list-style-type: none;
        margin-top: 10px;
      }

      .analysis-item {
        margin-bottom: 10px;
        padding-left: 25px;
        position: relative;
      }

      .analysis-item::before {
        content: "•";
        position: absolute;
        left: 10px;
        color: var(--primary);
      }

      .highlighted-text {
        background: rgba(88, 166, 255, 0.2);
        padding: 2px 4px;
        border-radius: 4px;
        font-family: monospace;
      }

      .warning-text {
        background: rgba(227, 179, 65, 0.2);
        padding: 2px 4px;
        border-radius: 4px;
        font-family: monospace;
      }

      .error-text {
        background: rgba(248, 81, 73, 0.2);
        padding: 2px 4px;
        border-radius: 4px;
        font-family: monospace;
      }

      .success-text {
        background: rgba(86, 211, 100, 0.2);
        padding: 2px 4px;
        border-radius: 4px;
        font-family: monospace;
      }

      .action-btn {
        background: transparent;
        border: 1px solid var(--border);
        color: var(--text-light);
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.8rem;
        transition: all 0.3s ease;
      }

      .action-btn:hover {
        border-color: var(--primary);
        background: rgba(88, 166, 255, 0.1);
      }

      .progress-bar-container {
        width: 100%;
        height: 8px;
        background: var(--bg-dark);
        border-radius: 4px;
        overflow: hidden;
        margin-top: 10px;
      }

      .progress-bar {
        height: 100%;
        border-radius: 4px;
        transition: width 0.5s ease;
      }

      .progress-good {
        background: var(--success);
      }

      .progress-medium {
        background: var(--warning);
      }

      .progress-poor {
        background: var(--danger);
      }

      .text-preview {
        background: var(--bg-dark);
        border-radius: 8px;
        border: 1px solid var(--border);
        padding: 20px;
        margin-top: 20px;
        line-height: 1.6;
        max-height: 300px;
        overflow-y: auto;
      }

      .text-preview p {
        margin-bottom: 10px;
      }

      .text-preview .highlight {
        background: rgba(88, 166, 255, 0.2);
        padding: 2px 0;
      }

      .text-preview .warning {
        background: rgba(227, 179, 65, 0.2);
        padding: 2px 0;
      }

      .text-preview .error {
        background: rgba(248, 81, 73, 0.2);
        padding: 2px 0;
      }

      .text-preview .success {
        background: rgba(86, 211, 100, 0.2);
        padding: 2px 0;
      }

      .suggestions-container {
        margin-top: 20px;
      }

      .suggestion-item {
        background: var(--bg-dark);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 15px;
        transition: all 0.3s ease;
      }

      .suggestion-item:hover {
        border-color: var(--primary);
      }

      .suggestion-title {
        font-size: 1rem;
        color: var(--primary);
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .suggestion-content {
        color: var(--text-muted);
        line-height: 1.5;
      }

      .suggestion-actions {
        display: flex;
        gap: 10px;
        margin-top: 10px;
        justify-content: flex-end;
      }

      .suggestion-btn {
        background: var(--primary);
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.8rem;
        transition: all 0.3s ease;
      }

      .suggestion-btn:hover {
        background: var(--primary-hover);
      }

      .suggestion-btn.secondary {
        background: transparent;
        border: 1px solid var(--border);
        color: var(--text-light);
      }

      .suggestion-btn.secondary:hover {
        border-color: var(--primary);
        background: rgba(88, 166, 255, 0.1);
      }

      .toast {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 12px 20px;
        border-radius: 8px;
        color: white;
        font-size: 0.9rem;
        z-index: 1000;
        opacity: 0;
        transform: translateY(-20px);
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .toast.success {
        background: var(--success);
      }

      .toast.error {
        background: var(--danger);
      }

      .toast.warning {
        background: var(--warning);
      }

      .toast.show {
        opacity: 1;
        transform: translateY(0);
      }

      .toast-icon {
        font-size: 1.2rem;
      }

      .toast-message {
        flex: 1;
      }

      .toast-close {
        background: transparent;
        border: none;
        color: white;
        cursor: pointer;
        font-size: 1.2rem;
        opacity: 0.7;
        transition: opacity 0.3s ease;
      }

      .toast-close:hover {
        opacity: 1;
      }

      .hamburger-menu {
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 1000;
        cursor: pointer;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 8px;
        transition: all 0.3s ease;
      }

      .hamburger-menu:hover {
        border-color: var(--primary);
      }

      .hamburger-icon {
        width: 24px;
        height: 24px;
        position: relative;
      }

      .hamburger-icon span {
        display: block;
        position: absolute;
        height: 2px;
        width: 100%;
        background: var(--text-light);
        border-radius: 2px;
        opacity: 1;
        left: 0;
        transform: rotate(0deg);
        transition: all 0.3s ease;
      }

      .hamburger-icon span:nth-child(1) {
        top: 6px;
      }

      .hamburger-icon span:nth-child(2),
      .hamburger-icon span:nth-child(3) {
        top: 12px;
      }

      .hamburger-icon span:nth-child(4) {
        top: 18px;
      }

      .hamburger-menu.open .hamburger-icon span:nth-child(1),
      .hamburger-menu.open .hamburger-icon span:nth-child(4) {
        width: 0%;
        left: 50%;
        opacity: 0;
      }

      .hamburger-menu.open .hamburger-icon span:nth-child(2) {
        transform: rotate(45deg);
      }

      .hamburger-menu.open .hamburger-icon span:nth-child(3) {
        transform: rotate(-45deg);
      }

      .nav-menu {
        position: fixed;
        top: 0;
        left: -300px;
        width: 300px;
        height: 100%;
        background: var(--bg-card);
        border-right: 1px solid var(--border);
        z-index: 999;
        transition: all 0.3s ease;
        overflow-y: auto;
        padding: 80px 20px 20px;
      }

      .nav-menu.open {
        left: 0;
      }

      .nav-menu-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 998;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .nav-menu-overlay.open {
        opacity: 1;
        visibility: visible;
      }

      .nav-menu-title {
        font-size: 1.2rem;
        color: var(--primary);
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--border);
      }

      .nav-menu-list {
        list-style-type: none;
      }

      .nav-menu-item {
        margin-bottom: 10px;
      }

      .nav-menu-link {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px;
        border-radius: 8px;
        color: var(--text-light);
        text-decoration: none;
        transition: all 0.3s ease;
      }

      .nav-menu-link:hover {
        background: rgba(88, 166, 255, 0.1);
      }

      .nav-menu-link.active {
        background: var(--primary);
        color: white;
      }

      .nav-menu-icon {
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      footer {
        text-align: center;
        margin-top: 40px;
        color: var(--text-muted);
        font-size: 0.9rem;
        padding: 20px 0;
        border-top: 1px solid var(--border);
      }

      .social-links {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 10px;
      }

      .social-link {
        color: var(--text-muted);
        text-decoration: none;
        transition: all 0.3s ease;
      }

      .social-link:hover {
        color: var(--primary);
      }

      /* Light theme */
      body.light-theme {
        --primary: #0066cc;
        --primary-hover: #0052a3;
        --bg-dark: #f5f8fa;
        --bg-card: #ffffff;
        --text-light: #24292e;
        --text-muted: #586069;
        --border: #e1e4e8;
        --shadow: rgba(0, 102, 204, 0.2);
        --danger: #d73a49;
        --success: #28a745;
        --warning: #f1c40f;
      }

      /* Responsive styles */
      @media (max-width: 768px) {
        .container {
          padding: 20px;
          margin: 20px auto;
        }

        h1 {
          font-size: 1.8rem;
        }

        .description {
          font-size: 0.9rem;
        }

        .results-grid {
          grid-template-columns: 1fr;
        }

        .result-value {
          font-size: 1.5rem;
        }

        .tabs {
          flex-wrap: nowrap;
          overflow-x: auto;
          padding-bottom: 5px;
        }

        .tab {
          padding: 8px 15px;
          font-size: 0.9rem;
          white-space: nowrap;
        }
      }

      @media (max-width: 480px) {
        .container {
          padding: 15px;
          margin: 10px auto;
        }

        .theme-toggle {
          top: 10px;
          right: 10px;
          padding: 6px 10px;
          font-size: 0.8rem;
        }

        .hamburger-menu {
          top: 10px;
          left: 10px;
          width: 35px;
          height: 35px;
        }

        h1 {
          font-size: 1.5rem;
          margin-top: 20px;
        }

        .nav-menu {
          width: 250px;
          left: -250px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Hamburger Menu -->
    <div class="hamburger-menu" id="hamburgerMenu">
      <div class="hamburger-icon">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>

    <!-- Navigation Menu -->
    <div class="nav-menu" id="navMenu">
      <h2 class="nav-menu-title">School Tools Hub</h2>
      <ul class="nav-menu-list">
        <li class="nav-menu-item">
          <a href="gwa_calculator.html" class="nav-menu-link">
            <span>GWA Calculator</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="general_average_counter.html" class="nav-menu-link">
            <span>General Average</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="pomodoro_timer.html" class="nav-menu-link">
            <span>Pomodoro Timer</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="unit_converter.html" class="nav-menu-link">
            <span>Unit Converter</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="dictionary.html" class="nav-menu-link">
            <span>Dictionary</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="word_counter.html" class="nav-menu-link">
            <span>Word Counter</span>
          </a>
        </li>

        <li class="nav-menu-item">
          <a href="typing_test.html" class="nav-menu-link">
            <span>Typing Test</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="readability_checker.html" class="nav-menu-link">
            <span>Readability Checker</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="citation_generator.html" class="nav-menu-link">
            <span>Citation Generator</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="text_case_converter.html" class="nav-menu-link">
            <span>Text Case Converter</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="physics_calculator.html" class="nav-menu-link">
            <span>Physics Calculator</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="bmi_calculator.html" class="nav-menu-link">
            <span>BMI Calculator</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="statistical_calculator.html" class="nav-menu-link">
            <span>Statistical Calculator</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="trigonometry_solver.html" class="nav-menu-link">
            <span>Trigonometry Solver</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="data_sorting.html" class="nav-menu-link">
            <span>Data Sorting</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="metadata_viewer.html" class="nav-menu-link">
            <span>Metadata Viewer</span>
          </a>
        </li>
      </ul>
    </div>
    <div class="nav-menu-overlay" id="navMenuOverlay"></div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
      <div class="toast-icon" id="toastIcon"></div>
      <div class="toast-message" id="toastMessage"></div>
      <button class="toast-close" id="toastClose">×</button>
    </div>

    <div class="nav-menu-overlay" id="navMenuOverlay"></div>

    <!-- Theme Toggle Button -->
    <button class="theme-toggle" onclick="toggleTheme()">
      <span id="theme-icon">🌙</span> <span id="theme-text">Dark Mode</span>
    </button>

    <!-- Main Container -->
    <div class="container">
      <a href="../index.html" class="back-btn">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          width="24"
          height="24"
          color="#d3d3d3"
          fill="none">
          <path
            d="M15 6C15 6 9.00001 10.4189 9 12C8.99999 13.5812 15 18 15 18"
            stroke="currentColor"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round" />
        </svg>
        Back to Home
      </a>

      <h1>Readability Score Checker</h1>
      <p class="description">
        Analyze text readability with Flesch-Kincaid scores, sentence complexity
        analysis, and get suggestions for improvement.
      </p>

      <div class="textarea-container">
        <textarea
          class="text-input"
          id="textInput"
          placeholder="Enter or paste your text here to analyze readability..."></textarea>
        <button class="clear-btn" id="clearBtn">Clear</button>
      </div>

      <button class="analyze-btn" id="analyzeBtn">Analyze Text</button>

      <div class="tabs">
        <div class="tab active" data-tab="scores">Readability Scores</div>
        <div class="tab" data-tab="analysis">Text Analysis</div>
        <div class="tab" data-tab="suggestions">Improvement Suggestions</div>
        <div class="tab" data-tab="preview">Text Preview</div>
      </div>

      <div class="tab-content active" id="scoresTab">
        <div class="results-grid">
          <div class="result-card">
            <div class="result-title">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                width="24"
                height="24"
                color="currentColor"
                fill="none">
                <path
                  d="M12 2V6M12 18V22M6 12H2M22 12H18M19.0784 19.0784L16.25 16.25M19.0784 4.99994L16.25 7.82837M4.92157 19.0784L7.75 16.25M4.92157 4.99994L7.75 7.82837"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
              Flesch-Kincaid Score
            </div>
            <div class="result-value" id="fkScore">-</div>
            <div class="result-description">
              Measures how easy your text is to read. Higher scores indicate
              easier readability.
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar" id="fkProgress" style="width: 0%"></div>
            </div>
          </div>

          <div class="result-card">
            <div class="result-title">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                width="24"
                height="24"
                color="currentColor"
                fill="none">
                <path
                  d="M12 6.5C12 6.5 12 17.5 12 17.5M12 17.5C10.4 17.5 7.5 16.5 7.5 13.5M12 17.5C13.6 17.5 16.5 16.5 16.5 13.5M8 7.5C8 7.5 9.5 6.5 12 6.5C14.5 6.5 16 7.5 16 7.5"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round" />
                <path
                  d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"
                  stroke="currentColor"
                  stroke-width="1.5" />
              </svg>
              Grade Level
            </div>
            <div class="result-value" id="gradeLevel">-</div>
            <div class="result-description">
              Indicates the US grade level needed to understand the text.
            </div>
            <div class="progress-bar-container">
              <div
                class="progress-bar"
                id="gradeProgress"
                style="width: 0%"></div>
            </div>
          </div>

          <div class="result-card">
            <div class="result-title">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                width="24"
                height="24"
                color="currentColor"
                fill="none">
                <path
                  d="M8 10H16M8 14H13M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2Z"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
              Conciseness Score
            </div>
            <div class="result-value" id="conciseScore">-</div>
            <div class="result-description">
              Measures how concise your text is. Higher scores indicate more
              concise writing.
            </div>
            <div class="progress-bar-container">
              <div
                class="progress-bar"
                id="conciseProgress"
                style="width: 0%"></div>
            </div>
          </div>

          <div class="result-card">
            <div class="result-title">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                width="24"
                height="24"
                color="currentColor"
                fill="none">
                <path
                  d="M12 2V6M12 18V22M6 12H2M22 12H18M19.0784 19.0784L16.25 16.25M19.0784 4.99994L16.25 7.82837M4.92157 19.0784L7.75 16.25M4.92157 4.99994L7.75 7.82837"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
              Lexical Density
            </div>
            <div class="result-value" id="lexicalDensity">-</div>
            <div class="result-description">
              Percentage of content words (nouns, verbs, adjectives, adverbs) in
              your text.
            </div>
            <div class="progress-bar-container">
              <div
                class="progress-bar"
                id="lexicalProgress"
                style="width: 0%"></div>
            </div>
          </div>
        </div>

        <div class="analysis-section">
          <h3 class="analysis-title">Summary</h3>
          <div class="analysis-content" id="scoreSummary">
            Enter text and click "Analyze Text" to see readability scores and
            suggestions.
          </div>
        </div>
      </div>

      <div class="tab-content" id="analysisTab">
        <div class="analysis-section">
          <h3 class="analysis-title">Sentence Structure Analysis</h3>
          <div class="analysis-content" id="sentenceAnalysis">
            <p
              >No text analyzed yet. Please enter text and click "Analyze
              Text".</p
            >
          </div>
        </div>

        <div class="analysis-section">
          <h3 class="analysis-title">Paragraph Length Analysis</h3>
          <div class="analysis-content" id="paragraphAnalysis">
            <p
              >No text analyzed yet. Please enter text and click "Analyze
              Text".</p
            >
          </div>
        </div>

        <div class="analysis-section">
          <h3 class="analysis-title">Passive Voice Detection</h3>
          <div class="analysis-content" id="passiveVoiceAnalysis">
            <p
              >No text analyzed yet. Please enter text and click "Analyze
              Text".</p
            >
          </div>
        </div>

        <div class="analysis-section">
          <h3 class="analysis-title">Jargon & Technical Terms</h3>
          <div class="analysis-content" id="jargonAnalysis">
            <p
              >No text analyzed yet. Please enter text and click "Analyze
              Text".</p
            >
          </div>
        </div>

        <div class="analysis-section">
          <h3 class="analysis-title">Tone Analysis</h3>
          <div class="analysis-content" id="toneAnalysis">
            <p
              >No text analyzed yet. Please enter text and click "Analyze
              Text".</p
            >
          </div>
        </div>
      </div>

      <div class="tab-content" id="suggestionsTab">
        <div class="analysis-section">
          <h3 class="analysis-title">Filler Word Removal</h3>
          <div class="analysis-content" id="fillerWordAnalysis">
            <p
              >No text analyzed yet. Please enter text and click "Analyze
              Text".</p
            >
          </div>
        </div>

        <div class="analysis-section">
          <h3 class="analysis-title">Skimmability Improvements</h3>
          <div class="analysis-content" id="skimmabilityAnalysis">
            <p
              >No text analyzed yet. Please enter text and click "Analyze
              Text".</p
            >
          </div>
        </div>

        <div class="analysis-section">
          <h3 class="analysis-title">Simplification Suggestions</h3>
          <div class="analysis-content" id="simplificationSuggestions">
            <p
              >No text analyzed yet. Please enter text and click "Analyze
              Text".</p
            >
          </div>
        </div>

        <div class="suggestions-container" id="suggestionsContainer">
          <!-- Suggestions will be added here -->
        </div>
      </div>

      <div class="tab-content" id="previewTab">
        <div class="analysis-section">
          <h3 class="analysis-title">Text with Highlights</h3>
          <div class="text-preview" id="textPreview">
            <p
              >No text analyzed yet. Please enter text and click "Analyze
              Text".</p
            >
          </div>
        </div>

        <div class="analysis-section">
          <h3 class="analysis-title">Keyword Highlights</h3>
          <div class="analysis-content" id="keywordAnalysis">
            <p
              >No text analyzed yet. Please enter text and click "Analyze
              Text".</p
            >
          </div>
        </div>
      </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
      <div class="toast-icon" id="toastIcon"></div>
      <div class="toast-message" id="toastMessage"></div>
      <button class="toast-close" id="toastClose">×</button>
    </div>

    <!-- Footer -->
    <footer>
      <p
        >Designed and developed by
        <a
          href="https://www.facebook.com/61560816188544"
          class="social-link"
          target="_blank"
          >@driyqnn</a
        >
        | &copy; 2025 School Tools Hub</p
      >
      <div class="social-links">
        <a
          href="https://www.facebook.com/61560816188544"
          class="social-link"
          target="_blank"
          >Facebook</a
        >
      </div>
    </footer>

    <script>
      // DOM Elements
      const hamburgerMenu = document.getElementById("hamburgerMenu");
      const navMenu = document.getElementById("navMenu");
      const navMenuOverlay = document.getElementById("navMenuOverlay");
      const textInput = document.getElementById("textInput");
      const clearBtn = document.getElementById("clearBtn");
      const analyzeBtn = document.getElementById("analyzeBtn");
      const tabs = document.querySelectorAll(".tab");
      const tabContents = document.querySelectorAll(".tab-content");
      const toast = document.getElementById("toast");
      const toastIcon = document.getElementById("toastIcon");
      const toastMessage = document.getElementById("toastMessage");
      const toastClose = document.getElementById("toastClose");

      // Common words to ignore in analysis
      const commonWords = [
        "the",
        "and",
        "a",
        "to",
        "of",
        "in",
        "is",
        "it",
        "that",
        "for",
        "on",
        "with",
        "as",
        "by",
        "at",
        "from",
        "be",
        "this",
        "was",
        "are",
        "were",
        "has",
        "have",
        "had",
        "an",
        "but",
        "or",
        "not",
        "what",
        "all",
        "when",
        "who",
        "which",
        "can",
        "will",
        "just",
        "do",
        "more",
        "if",
        "so",
        "out",
        "up",
        "their",
        "there",
        "about",
        "into",
        "than",
        "them",
        "then",
        "some",
        "her",
        "him",
        "his",
        "she",
        "he",
        "would",
        "could",
        "you",
        "your",
        "they",
        "may",
        "these",
        "those",
        "its",
        "we",
        "our",
      ];

      // Filler words to detect
      const fillerWords = [
        "very",
        "really",
        "actually",
        "basically",
        "literally",
        "definitely",
        "certainly",
        "probably",
        "just",
        "so",
        "quite",
        "simply",
        "that",
        "totally",
        "absolutely",
        "completely",
        "entirely",
        "somewhat",
        "somehow",
        "anyway",
        "anyhow",
        "perhaps",
        "maybe",
        "kind of",
        "sort of",
        "like",
        "you know",
        "I mean",
        "well",
        "um",
        "uh",
        "er",
        "ah",
      ];

      // Technical jargon by field
      const technicalJargon = {
        technology: [
          "algorithm",
          "bandwidth",
          "backend",
          "frontend",
          "cache",
          "compiler",
          "database",
          "encryption",
          "firewall",
          "framework",
          "interface",
          "kernel",
          "latency",
          "middleware",
          "protocol",
          "runtime",
          "server",
          "syntax",
          "throughput",
          "virtualization",
          "api",
          "sdk",
          "ide",
          "gui",
          "cli",
        ],
        medical: [
          "acute",
          "chronic",
          "diagnosis",
          "etiology",
          "idiopathic",
          "lesion",
          "malignant",
          "benign",
          "metastasis",
          "necrosis",
          "palliative",
          "pathology",
          "prognosis",
          "remission",
          "syndrome",
          "systemic",
          "vascular",
          "ventral",
          "dorsal",
          "proximal",
          "distal",
          "lateral",
          "medial",
        ],
        legal: [
          "affidavit",
          "allegation",
          "appellant",
          "arbitration",
          "deposition",
          "discovery",
          "estoppel",
          "indemnity",
          "injunction",
          "jurisdiction",
          "litigation",
          "malfeasance",
          "negligence",
          "precedent",
          "stipulation",
          "subpoena",
          "tort",
          "writ",
          "plaintiff",
          "defendant",
          "statute",
          "clause",
        ],
        business: [
          "acquisition",
          "amortization",
          "assets",
          "collateral",
          "depreciation",
          "diversification",
          "equity",
          "fiscal",
          "leverage",
          "liability",
          "liquidity",
          "margin",
          "portfolio",
          "prospectus",
          "securities",
          "stakeholder",
          "valuation",
          "venture",
          "roi",
          "kpi",
          "cagr",
          "ebitda",
        ],
        academic: [
          "abstract",
          "analysis",
          "bibliography",
          "citation",
          "discourse",
          "dissertation",
          "empirical",
          "epistemology",
          "hypothesis",
          "methodology",
          "paradigm",
          "pedagogy",
          "qualitative",
          "quantitative",
          "rhetoric",
          "synthesis",
          "theoretical",
          "thesis",
          "variable",
          "correlation",
          "causation",
        ],
      };

      // Load saved theme preference
      const savedTheme = localStorage.getItem("theme") || "dark";
      document.body.classList.toggle("light-theme", savedTheme === "light");
      updateThemeToggle();

      // Event Listeners
      document.addEventListener("DOMContentLoaded", function () {
        // Load saved text if available
        const savedText = localStorage.getItem("readabilityText");
        if (savedText) {
          textInput.value = savedText;
        }

        // Set up tab switching
        tabs.forEach((tab) => {
          tab.addEventListener("click", function () {
            const tabId = this.getAttribute("data-tab");
            switchTab(tabId);
          });
        });

        // Set up hamburger menu
        hamburgerMenu.addEventListener("click", toggleNavMenu);
        navMenuOverlay.addEventListener("click", closeNavMenu);

        // Set up clear button
        clearBtn.addEventListener("click", clearText);

        // Set up analyze button
        analyzeBtn.addEventListener("click", analyzeText);

        // Set up toast close button
        toastClose.addEventListener("click", hideToast);

        // Save text on input
        textInput.addEventListener("input", function () {
          localStorage.setItem("readabilityText", this.value);
        });
      });

      // Theme toggle functionality
      function toggleTheme() {
        document.body.classList.toggle("light-theme");
        const isLight = document.body.classList.contains("light-theme");
        localStorage.setItem("theme", isLight ? "light" : "dark");
        updateThemeToggle();
      }

      function updateThemeToggle() {
        const isLight = document.body.classList.contains("light-theme");
        document.getElementById("theme-icon").textContent = isLight
          ? "☀️"
          : "🌙";
        document.getElementById("theme-text").textContent = isLight
          ? "Light Mode"
          : "Dark Mode";
      }

      // Toggle navigation menu
      function toggleNavMenu() {
        hamburgerMenu.classList.toggle("open");
        navMenu.classList.toggle("open");
        navMenuOverlay.classList.toggle("open");
      }

      // Close navigation menu
      function closeNavMenu() {
        hamburgerMenu.classList.remove("open");
        navMenu.classList.remove("open");
        navMenuOverlay.classList.remove("open");
      }

      // Switch between tabs
      function switchTab(tabId) {
        // Hide all tab contents
        tabContents.forEach((content) => {
          content.classList.remove("active");
        });

        // Deactivate all tabs
        tabs.forEach((tab) => {
          tab.classList.remove("active");
        });

        // Activate selected tab and content
        document.getElementById(`${tabId}Tab`).classList.add("active");
        document
          .querySelector(`.tab[data-tab="${tabId}"]`)
          .classList.add("active");
      }

      // Clear text
      function clearText() {
        if (textInput.value.trim() === "") {
          showToast("Text area is already empty", "warning");
          return;
        }

        if (confirm("Are you sure you want to clear the text?")) {
          textInput.value = "";
          localStorage.removeItem("readabilityText");
          resetAnalysis();
          showToast("Text cleared successfully", "success");
        }
      }

      // Reset analysis
      function resetAnalysis() {
        document.getElementById("fkScore").textContent = "-";
        document.getElementById("gradeLevel").textContent = "-";
        document.getElementById("conciseScore").textContent = "-";
        document.getElementById("lexicalDensity").textContent = "-";
        document.getElementById("fkProgress").style.width = "0%";
        document.getElementById("gradeProgress").style.width = "0%";
        document.getElementById("conciseProgress").style.width = "0%";
        document.getElementById("lexicalProgress").style.width = "0%";
        document.getElementById("scoreSummary").innerHTML =
          'Enter text and click "Analyze Text" to see readability scores and suggestions.';
        document.getElementById("sentenceAnalysis").innerHTML =
          '<p>No text analyzed yet. Please enter text and click "Analyze Text".</p>';
        document.getElementById("paragraphAnalysis").innerHTML =
          '<p>No text analyzed yet. Please enter text and click "Analyze Text".</p>';
        document.getElementById("passiveVoiceAnalysis").innerHTML =
          '<p>No text analyzed yet. Please enter text and click "Analyze Text".</p>';
        document.getElementById("jargonAnalysis").innerHTML =
          '<p>No text analyzed yet. Please enter text and click "Analyze Text".</p>';
        document.getElementById("toneAnalysis").innerHTML =
          '<p>No text analyzed yet. Please enter text and click "Analyze Text".</p>';
        document.getElementById("fillerWordAnalysis").innerHTML =
          '<p>No text analyzed yet. Please enter text and click "Analyze Text".</p>';
        document.getElementById("skimmabilityAnalysis").innerHTML =
          '<p>No text analyzed yet. Please enter text and click "Analyze Text".</p>';
        document.getElementById("simplificationSuggestions").innerHTML =
          '<p>No text analyzed yet. Please enter text and click "Analyze Text".</p>';
        document.getElementById("suggestionsContainer").innerHTML = "";
        document.getElementById("textPreview").innerHTML =
          '<p>No text analyzed yet. Please enter text and click "Analyze Text".</p>';
        document.getElementById("keywordAnalysis").innerHTML =
          '<p>No text analyzed yet. Please enter text and click "Analyze Text".</p>';
      }

      // Analyze text
      function analyzeText() {
        const text = textInput.value.trim();

        if (text === "") {
          showToast("Please enter some text to analyze", "error");
          return;
        }

        // Basic text statistics
        const words = text.match(/\b\w+\b/g) || [];
        const sentences = text.match(/[^.!?]+[.!?]+/g) || [];
        const paragraphs = text
          .split(/\n\s*\n/)
          .filter((p) => p.trim().length > 0);
        const characters = text.length;
        const charactersNoSpaces = text.replace(/\s/g, "").length;
        const syllables = countSyllables(words);

        // Calculate Flesch-Kincaid Reading Ease score
        // Formula: 206.835 - 1.015 * (words / sentences) - 84.6 * (syllables / words)
        const wordsPerSentence = words.length / Math.max(sentences.length, 1);
        const syllablesPerWord = syllables / Math.max(words.length, 1);
        const fkScore = Math.round(
          206.835 - 1.015 * wordsPerSentence - 84.6 * syllablesPerWord
        );

        // Calculate grade level
        // Formula: 0.39 * (words / sentences) + 11.8 * (syllables / words) - 15.59
        const gradeLevel = Math.round(
          0.39 * wordsPerSentence + 11.8 * syllablesPerWord - 15.59
        );

        // Calculate conciseness score (inverse of words per sentence, normalized to 0-100)
        const conciseScore = Math.round(
          100 - Math.min(100, (wordsPerSentence / 25) * 100)
        );

        // Calculate lexical density
        const contentWords = words.filter(
          (word) => !commonWords.includes(word.toLowerCase())
        );
        const lexicalDensity = Math.round(
          (contentWords.length / words.length) * 100
        );

        // Update scores
        document.getElementById("fkScore").textContent = fkScore;
        document.getElementById("gradeLevel").textContent = gradeLevel;
        document.getElementById("conciseScore").textContent = conciseScore;
        document.getElementById("lexicalDensity").textContent =
          lexicalDensity + "%";

        // Update progress bars
        updateProgressBar("fkProgress", fkScore, 0, 100);
        updateProgressBar("gradeProgress", gradeLevel, 0, 18, true);
        updateProgressBar("conciseProgress", conciseScore, 0, 100);
        updateProgressBar("lexicalProgress", lexicalDensity, 0, 100);

        // Update score summary
        updateScoreSummary(
          fkScore,
          gradeLevel,
          conciseScore,
          lexicalDensity,
          wordsPerSentence
        );

        // Analyze sentence structure
        analyzeSentenceStructure(sentences);

        // Analyze paragraph length
        analyzeParagraphLength(paragraphs);

        // Detect passive voice
        detectPassiveVoice(text);

        // Detect jargon and technical terms
        detectJargon(words);

        // Analyze tone
        analyzeTone(text);

        // Analyze filler words
        analyzeFillerWords(text);

        // Analyze skimmability
        analyzeSkimmability(paragraphs);

        // Generate simplification suggestions
        generateSimplificationSuggestions(text, words, sentences);

        // Generate text preview with highlights
        generateTextPreview(text);

        // Analyze keywords
        analyzeKeywords(words);

        // Show success toast
        showToast("Text analyzed successfully", "success");

        // Switch to scores tab
        switchTab("scores");
      }

      // Count syllables in words
      function countSyllables(words) {
        let count = 0;

        for (const word of words) {
          count += countWordSyllables(word.toLowerCase());
        }

        return count;
      }

      // Count syllables in a single word
      function countWordSyllables(word) {
        word = word.toLowerCase();

        // Special cases
        if (word.length <= 3) return 1;

        // Remove ending 'e', except for 'le'
        word = word.replace(/(?:[^l]e|ed|es)$/, "");

        // Count vowel groups
        const vowelGroups = word.match(/[aeiouy]+/g);

        return vowelGroups ? vowelGroups.length : 1;
      }

      // Update progress bar
      function updateProgressBar(id, value, min, max, inverse = false) {
        const progressBar = document.getElementById(id);
        const percentage = Math.min(
          100,
          Math.max(0, ((value - min) / (max - min)) * 100)
        );

        progressBar.style.width = percentage + "%";

        // Determine color based on value
        let colorClass;

        if (inverse) {
          // For metrics where lower is better (like grade level)
          if (percentage < 33) {
            colorClass = "progress-good";
          } else if (percentage < 66) {
            colorClass = "progress-medium";
          } else {
            colorClass = "progress-poor";
          }
        } else {
          // For metrics where higher is better
          if (percentage > 66) {
            colorClass = "progress-good";
          } else if (percentage > 33) {
            colorClass = "progress-medium";
          } else {
            colorClass = "progress-poor";
          }
        }

        // Remove existing classes
        progressBar.classList.remove(
          "progress-good",
          "progress-medium",
          "progress-poor"
        );

        // Add new class
        progressBar.classList.add(colorClass);
      }

      // Update score summary
      function updateScoreSummary(
        fkScore,
        gradeLevel,
        conciseScore,
        lexicalDensity,
        wordsPerSentence
      ) {
        let summary =
          '<p>Based on the analysis of your text:</p><ul class="analysis-list">';

        // Flesch-Kincaid score interpretation
        if (fkScore >= 90) {
          summary +=
            '<li class="analysis-item">Your text is <span class="success-text">very easy to read</span>, understandable by an average 5th grader.</li>';
        } else if (fkScore >= 80) {
          summary +=
            '<li class="analysis-item">Your text is <span class="success-text">easy to read</span>, understandable by an average 6th grader.</li>';
        } else if (fkScore >= 70) {
          summary +=
            '<li class="analysis-item">Your text is <span class="success-text">fairly easy to read</span>, understandable by an average 7th grader.</li>';
        } else if (fkScore >= 60) {
          summary +=
            '<li class="analysis-item">Your text is <span class="highlighted-text">standard/average</span>, understandable by an average 8th-9th grader.</li>';
        } else if (fkScore >= 50) {
          summary +=
            '<li class="analysis-item">Your text is <span class="highlighted-text">fairly difficult to read</span>, understandable by an average 10th-12th grader.</li>';
        } else if (fkScore >= 30) {
          summary +=
            '<li class="analysis-item">Your text is <span class="warning-text">difficult to read</span>, understandable by college students.</li>';
        } else {
          summary +=
            '<li class="analysis-item">Your text is <span class="error-text">very difficult to read</span>, understandable by college graduates.</li>';
        }

        // Grade level interpretation
        if (gradeLevel <= 6) {
          summary +=
            '<li class="analysis-item">Your text requires a <span class="success-text">primary school</span> education level to understand.</li>';
        } else if (gradeLevel <= 12) {
          summary +=
            '<li class="analysis-item">Your text requires a <span class="highlighted-text">secondary school</span> education level to understand.</li>';
        } else if (gradeLevel <= 16) {
          summary +=
            '<li class="analysis-item">Your text requires a <span class="warning-text">college</span> education level to understand.</li>';
        } else {
          summary +=
            '<li class="analysis-item">Your text requires an <span class="error-text">advanced degree</span> education level to understand.</li>';
        }

        // Conciseness interpretation
        if (conciseScore >= 70) {
          summary +=
            '<li class="analysis-item">Your text is <span class="success-text">very concise</span> with an average of ' +
            wordsPerSentence.toFixed(1) +
            " words per sentence.</li>";
        } else if (conciseScore >= 50) {
          summary +=
            '<li class="analysis-item">Your text has <span class="highlighted-text">average conciseness</span> with ' +
            wordsPerSentence.toFixed(1) +
            " words per sentence.</li>";
        } else {
          summary +=
            '<li class="analysis-item">Your text is <span class="warning-text">not very concise</span> with ' +
            wordsPerSentence.toFixed(1) +
            " words per sentence.</li>";
        }

        // Lexical density interpretation
        if (lexicalDensity >= 60) {
          summary +=
            '<li class="analysis-item">Your text has <span class="warning-text">high lexical density</span> (' +
            lexicalDensity +
            "%), which may make it more difficult to read.</li>";
        } else if (lexicalDensity >= 40) {
          summary +=
            '<li class="analysis-item">Your text has <span class="highlighted-text">balanced lexical density</span> (' +
            lexicalDensity +
            "%), which is good for most readers.</li>";
        } else {
          summary +=
            '<li class="analysis-item">Your text has <span class="success-text">low lexical density</span> (' +
            lexicalDensity +
            "%), making it easier to read but possibly less informative.</li>";
        }

        summary += "</ul>";

        document.getElementById("scoreSummary").innerHTML = summary;
      }

      // Analyze sentence structure
      function analyzeSentenceStructure(sentences) {
        if (sentences.length === 0) {
          document.getElementById("sentenceAnalysis").innerHTML =
            "<p>No sentences detected in the text.</p>";
          return;
        }

        const sentenceLengths = sentences.map((sentence) => {
          const words = sentence.match(/\b\w+\b/g) || [];
          return words.length;
        });

        const avgSentenceLength =
          sentenceLengths.reduce((sum, length) => sum + length, 0) /
          sentenceLengths.length;
        const shortSentences = sentenceLengths.filter(
          (length) => length < 10
        ).length;
        const mediumSentences = sentenceLengths.filter(
          (length) => length >= 10 && length <= 20
        ).length;
        const longSentences = sentenceLengths.filter(
          (length) => length > 20
        ).length;

        const shortPercentage = Math.round(
          (shortSentences / sentences.length) * 100
        );
        const mediumPercentage = Math.round(
          (mediumSentences / sentences.length) * 100
        );
        const longPercentage = Math.round(
          (longSentences / sentences.length) * 100
        );

        let analysis = `
          <p>Your text contains ${
            sentences.length
          } sentences with an average length of ${avgSentenceLength.toFixed(
          1
        )} words per sentence.</p>
          <ul class="analysis-list">
            <li class="analysis-item"><span class="success-text">${shortPercentage}%</span> short sentences (less than 10 words)</li>
            <li class="analysis-item"><span class="highlighted-text">${mediumPercentage}%</span> medium sentences (10-20 words)</li>
            <li class="analysis-item"><span class="warning-text">${longPercentage}%</span> long sentences (more than 20 words)</li>
          </ul>
        `;

        if (longPercentage > 30) {
          analysis +=
            "<p>Your text contains a high percentage of long sentences, which can make it harder to read. Consider breaking some of them into shorter sentences.</p>";
        } else if (shortPercentage > 70) {
          analysis +=
            "<p>Your text contains many short sentences. While this makes it easy to read, it might sound choppy. Consider combining some related short sentences.</p>";
        } else {
          analysis +=
            "<p>Your text has a good balance of sentence lengths, which helps maintain reader interest.</p>";
        }

        document.getElementById("sentenceAnalysis").innerHTML = analysis;
      }

      // Analyze paragraph length
      function analyzeParagraphLength(paragraphs) {
        if (paragraphs.length === 0) {
          document.getElementById("paragraphAnalysis").innerHTML =
            "<p>No paragraphs detected in the text.</p>";
          return;
        }

        const paragraphLengths = paragraphs.map((paragraph) => {
          const sentences = paragraph.match(/[^.!?]+[.!?]+/g) || [];
          return sentences.length;
        });

        const avgParagraphLength =
          paragraphLengths.reduce((sum, length) => sum + length, 0) /
          paragraphLengths.length;
        const shortParagraphs = paragraphLengths.filter(
          (length) => length === 1
        ).length;
        const mediumParagraphs = paragraphLengths.filter(
          (length) => length > 1 && length <= 3
        ).length;
        const longParagraphs = paragraphLengths.filter(
          (length) => length > 3
        ).length;

        const shortPercentage = Math.round(
          (shortParagraphs / paragraphs.length) * 100
        );
        const mediumPercentage = Math.round(
          (mediumParagraphs / paragraphs.length) * 100
        );
        const longPercentage = Math.round(
          (longParagraphs / paragraphs.length) * 100
        );

        let analysis = `
          <p>Your text contains ${
            paragraphs.length
          } paragraphs with an average of ${avgParagraphLength.toFixed(
          1
        )} sentences per paragraph.</p>
          <ul class="analysis-list">
            <li class="analysis-item"><span class="highlighted-text">${shortPercentage}%</span> short paragraphs (1 sentence)</li>
            <li class="analysis-item"><span class="success-text">${mediumPercentage}%</span> medium paragraphs (2-3 sentences)</li>
            <li class="analysis-item"><span class="warning-text">${longPercentage}%</span> long paragraphs (more than 3 sentences)</li>
          </ul>
        `;

        if (longPercentage > 50) {
          analysis +=
            "<p>Your text contains many long paragraphs, which can be intimidating for readers. Consider breaking them into smaller, more focused paragraphs.</p>";
        } else if (shortPercentage > 70) {
          analysis +=
            "<p>Your text contains many single-sentence paragraphs. While this can be good for emphasis, too many can make your text feel fragmented.</p>";
        } else {
          analysis +=
            "<p>Your text has a good balance of paragraph lengths, which helps maintain readability and flow.</p>";
        }

        document.getElementById("paragraphAnalysis").innerHTML = analysis;
      }

      // Detect passive voice
      function detectPassiveVoice(text) {
        // Simple passive voice detection patterns
        const passivePatterns = [
          /\b(?:am|is|are|was|were|be|been|being)\s+\w+ed\b/gi,
          /\b(?:am|is|are|was|were|be|been|being)\s+\w+en\b/gi,
          /\b(?:has|have|had)\s+been\s+\w+ed\b/gi,
          /\b(?:has|have|had)\s+been\s+\w+en\b/gi,
        ];

        let passiveInstances = [];

        passivePatterns.forEach((pattern) => {
          const matches = text.match(pattern) || [];
          passiveInstances = passiveInstances.concat(matches);
        });

        // Remove duplicates
        passiveInstances = [...new Set(passiveInstances)];

        if (passiveInstances.length === 0) {
          document.getElementById("passiveVoiceAnalysis").innerHTML =
            "<p>No instances of passive voice detected in your text.</p>";
          return;
        }

        const sentences = text.match(/[^.!?]+[.!?]+/g) || [];
        const passivePercentage = Math.round(
          (passiveInstances.length / sentences.length) * 100
        );

        let analysis = `
          <p>Found ${passiveInstances.length} instances of passive voice (approximately ${passivePercentage}% of sentences).</p>
        `;

        if (passiveInstances.length > 0) {
          analysis +=
            '<p>Examples of passive voice in your text:</p><ul class="analysis-list">';

          // Show up to 5 examples
          const examples = passiveInstances.slice(0, 5);
          examples.forEach((instance) => {
            analysis += `<li class="analysis-item"><span class="warning-text">${instance}</span></li>`;
          });

          analysis += "</ul>";
        }

        if (passivePercentage > 20) {
          analysis +=
            "<p>Your text contains a high percentage of passive voice constructions. Consider converting some to active voice for more direct and engaging writing.</p>";
        } else if (passivePercentage > 0) {
          analysis +=
            "<p>Your text contains a moderate amount of passive voice. While some passive constructions are fine, active voice is generally more engaging.</p>";
        }

        document.getElementById("passiveVoiceAnalysis").innerHTML = analysis;
      }

      // Detect jargon and technical terms
      function detectJargon(words) {
        const uniqueWords = [
          ...new Set(words.map((word) => word.toLowerCase())),
        ];
        let jargonFound = [];
        let jargonCategories = {};

        // Check each word against jargon lists
        for (const word of uniqueWords) {
          for (const [category, terms] of Object.entries(technicalJargon)) {
            if (terms.includes(word)) {
              jargonFound.push(word);

              if (!jargonCategories[category]) {
                jargonCategories[category] = [];
              }

              jargonCategories[category].push(word);
            }
          }
        }

        if (jargonFound.length === 0) {
          document.getElementById("jargonAnalysis").innerHTML =
            "<p>No specialized jargon or technical terms detected in your text.</p>";
          return;
        }

        let analysis = `
          <p>Found ${jargonFound.length} specialized terms or jargon words in your text.</p>
        `;

        analysis += "<p>Jargon by category:</p>";

        for (const [category, terms] of Object.entries(jargonCategories)) {
          if (terms.length > 0) {
            analysis += `<p><strong>${
              category.charAt(0).toUpperCase() + category.slice(1)
            } terms:</strong> `;
            analysis += terms
              .map((term) => `<span class="highlighted-text">${term}</span>`)
              .join(", ");
            analysis += "</p>";
          }
        }

        if (jargonFound.length > 5) {
          analysis +=
            "<p>Your text contains a significant amount of specialized terminology. Consider whether your audience will understand these terms, or if you should provide explanations.</p>";
        } else {
          analysis +=
            "<p>Your text contains a few specialized terms. If your audience may not be familiar with them, consider adding brief explanations.</p>";
        }

        document.getElementById("jargonAnalysis").innerHTML = analysis;
      }

      // Analyze tone
      function analyzeTone(text) {
        // Simple tone analysis based on keyword presence
        const toneIndicators = {
          formal: [
            "therefore",
            "consequently",
            "furthermore",
            "moreover",
            "thus",
            "hence",
            "accordingly",
            "subsequently",
            "nevertheless",
            "however",
            "notwithstanding",
            "albeit",
            "wherein",
            "whereby",
            "herein",
            "therein",
          ],
          academic: [
            "research",
            "study",
            "analysis",
            "data",
            "evidence",
            "hypothesis",
            "theory",
            "methodology",
            "findings",
            "conclusion",
            "literature",
            "framework",
            "paradigm",
            "concept",
            "context",
          ],
          casual: [
            "like",
            "so",
            "pretty",
            "really",
            "actually",
            "basically",
            "totally",
            "literally",
            "stuff",
            "things",
            "kind of",
            "sort of",
            "you know",
            "anyway",
            "cool",
            "awesome",
            "amazing",
          ],
          persuasive: [
            "should",
            "must",
            "need",
            "important",
            "essential",
            "crucial",
            "critical",
            "significant",
            "vital",
            "necessary",
            "consider",
            "believe",
            "think",
            "feel",
            "suggest",
          ],
          informative: [
            "explain",
            "describe",
            "define",
            "illustrate",
            "demonstrate",
            "show",
            "indicate",
            "represent",
            "signify",
            "denote",
            "example",
            "instance",
            "case",
            "specifically",
            "particularly",
          ],
        };

        const toneScores = {};
        const lowerText = text.toLowerCase();

        for (const [tone, indicators] of Object.entries(toneIndicators)) {
          let score = 0;

          for (const indicator of indicators) {
            const regex = new RegExp(`\\b${indicator}\\b`, "gi");
            const matches = lowerText.match(regex) || [];
            score += matches.length;
          }

          toneScores[tone] = score;
        }

        // Normalize scores
        const totalScore = Object.values(toneScores).reduce(
          (sum, score) => sum + score,
          0
        );

        if (totalScore === 0) {
          document.getElementById("toneAnalysis").innerHTML =
            "<p>Unable to determine the tone of your text. Try adding more content for a better analysis.</p>";
          return;
        }

        const normalizedScores = {};

        for (const [tone, score] of Object.entries(toneScores)) {
          normalizedScores[tone] = Math.round((score / totalScore) * 100);
        }

        // Determine primary and secondary tones
        const sortedTones = Object.entries(normalizedScores).sort(
          (a, b) => b[1] - a[1]
        );
        const primaryTone = sortedTones[0][0];
        const secondaryTone = sortedTones[1][0];

        let analysis = `
          <p>Your text appears to have a primarily <span class="highlighted-text">${primaryTone}</span> tone, with elements of a <span class="highlighted-text">${secondaryTone}</span> tone.</p>
          <p>Tone breakdown:</p>
          <ul class="analysis-list">
        `;

        for (const [tone, score] of sortedTones) {
          analysis += `<li class="analysis-item">${
            tone.charAt(0).toUpperCase() + tone.slice(1)
          }: ${score}%</li>`;
        }

        analysis += "</ul>";

        // Add tone-specific advice
        if (primaryTone === "formal" && normalizedScores.formal > 50) {
          analysis +=
            "<p>Your text is quite formal. This is appropriate for academic or professional contexts, but may be too stiff for general audiences.</p>";
        } else if (primaryTone === "casual" && normalizedScores.casual > 50) {
          analysis +=
            "<p>Your text has a casual, conversational tone. This works well for blogs and social media, but may be too informal for academic or professional contexts.</p>";
        } else if (
          primaryTone === "academic" &&
          normalizedScores.academic > 50
        ) {
          analysis +=
            "<p>Your text has a scholarly tone suitable for academic papers. Consider simplifying if writing for a general audience.</p>";
        }

        document.getElementById("toneAnalysis").innerHTML = analysis;
      }

      // Analyze filler words
      function analyzeFillerWords(text) {
        const lowerText = text.toLowerCase();
        let fillerInstances = [];

        for (const filler of fillerWords) {
          const regex = new RegExp(`\\b${filler}\\b`, "gi");
          const matches = text.match(regex) || [];

          matches.forEach((match) => {
            fillerInstances.push(match);
          });
        }

        if (fillerInstances.length === 0) {
          document.getElementById("fillerWordAnalysis").innerHTML =
            "<p>No filler words detected in your text. Great job keeping your writing concise!</p>";
          return;
        }

        // Count occurrences of each filler word
        const fillerCounts = {};

        fillerInstances.forEach((filler) => {
          const lowerFiller = filler.toLowerCase();
          fillerCounts[lowerFiller] = (fillerCounts[lowerFiller] || 0) + 1;
        });

        // Sort by frequency
        const sortedFillers = Object.entries(fillerCounts).sort(
          (a, b) => b[1] - a[1]
        );

        let analysis = `
          <p>Found ${fillerInstances.length} filler words in your text that could be removed to make your writing more concise.</p>
          <p>Most common filler words:</p>
          <ul class="analysis-list">
        `;

        // Show top 5 filler words
        const topFillers = sortedFillers.slice(0, 5);

        topFillers.forEach(([filler, count]) => {
          analysis += `<li class="analysis-item"><span class="warning-text">${filler}</span>: ${count} occurrences</li>`;
        });

        analysis += "</ul>";

        // Add suggestion for improvement
        if (fillerInstances.length > 10) {
          analysis +=
            "<p>Your text contains many filler words. Removing them would make your writing more direct and impactful.</p>";
        } else {
          analysis +=
            "<p>Your text contains a few filler words. Consider removing them for more concise writing.</p>";
        }

        // Add example of improved text
        if (sortedFillers.length > 0) {
          const mostCommonFiller = sortedFillers[0][0];
          const regex = new RegExp(`\\b${mostCommonFiller}\\b`, "gi");
          const sampleText = text.split(".")[0] + ".";
          const improvedText = sampleText.replace(regex, "");

          if (sampleText !== improvedText) {
            analysis += "<p>Example improvement:</p>";
            analysis += `<p>Original: <span class="warning-text">${sampleText}</span></p>`;
            analysis += `<p>Improved: <span class="success-text">${improvedText}</span></p>`;
          }
        }

        document.getElementById("fillerWordAnalysis").innerHTML = analysis;
      }

      // Analyze skimmability
      function analyzeSkimmability(paragraphs) {
        if (paragraphs.length === 0) {
          document.getElementById("skimmabilityAnalysis").innerHTML =
            "<p>No paragraphs detected in the text.</p>";
          return;
        }

        // Check for headings (lines with less than 7 words that end with no punctuation or a colon)
        let headingCount = 0;

        paragraphs.forEach((paragraph) => {
          const lines = paragraph.split("\n");

          lines.forEach((line) => {
            const words = line.match(/\b\w+\b/g) || [];
            if (
              words.length < 7 &&
              (line.trim().endsWith(":") || !line.trim().match(/[.!?]$/))
            ) {
              headingCount++;
            }
          });
        });

        // Check for bullet points
        const bulletPointRegex = /^[\s]*[-•*]\s/gm;
        const bulletMatches =
          paragraphs.join("\n").match(bulletPointRegex) || [];
        const bulletPointCount = bulletMatches.length;

        // Check for numbered lists
        const numberedListRegex = /^[\s]*\d+[.)]\s/gm;
        const numberedMatches =
          paragraphs.join("\n").match(numberedListRegex) || [];
        const numberedListCount = numberedMatches.length;

        // Calculate skimmability score (0-100)
        const listItemCount = bulletPointCount + numberedListCount;
        const structureElements = headingCount + listItemCount;
        const idealStructureRatio = 0.2; // Ideally, about 20% of paragraphs should have structure elements
        const actualStructureRatio = structureElements / paragraphs.length;

        let skimmabilityScore;

        if (actualStructureRatio === 0) {
          skimmabilityScore = 0;
        } else if (actualStructureRatio <= idealStructureRatio) {
          skimmabilityScore = Math.round(
            (actualStructureRatio / idealStructureRatio) * 100
          );
        } else {
          // If there are too many structure elements, it can also reduce skimmability
          skimmabilityScore = Math.round(
            100 -
              Math.min(
                100,
                ((actualStructureRatio - idealStructureRatio) / 0.3) * 100
              )
          );
        }

        let analysis = `
          <p>Skimmability Score: <span class="${
            skimmabilityScore > 70
              ? "success-text"
              : skimmabilityScore > 40
              ? "highlighted-text"
              : "warning-text"
          }">${skimmabilityScore}/100</span></p>
          <p>Structure elements found:</p>
          <ul class="analysis-list">
            <li class="analysis-item">Headings or subheadings: ${headingCount}</li>
            <li class="analysis-item">Bullet points: ${bulletPointCount}</li>
            <li class="analysis-item">Numbered list items: ${numberedListCount}</li>
          </ul>
        `;

        // Suggestions for improvement
        if (skimmabilityScore < 40) {
          analysis += `
            <p>Your text could be difficult to skim. Consider adding:</p>
            <ul class="analysis-list">
              <li class="analysis-item">Headings and subheadings to break up long sections</li>
              <li class="analysis-item">Bullet points or numbered lists for series of items</li>
              <li class="analysis-item">Bold text for key points or important terms</li>
              <li class="analysis-item">Shorter paragraphs (3-4 sentences maximum)</li>
            </ul>
          `;
        } else if (skimmabilityScore < 70) {
          analysis += `
            <p>Your text has some structure but could be more skimmable. Consider:</p>
            <ul class="analysis-list">
              <li class="analysis-item">Adding more headings to break up long sections of text</li>
              <li class="analysis-item">Converting appropriate paragraphs to bullet points or numbered lists</li>
              <li class="analysis-item">Using bold or italic formatting for emphasis on key points</li>
            </ul>
          `;
        } else {
          analysis += `
            <p>Your text is well-structured and skimmable. Good job using headings, lists, and other formatting elements to improve readability.</p>
          `;
        }

        document.getElementById("skimmabilityAnalysis").innerHTML = analysis;
      }

      // Generate simplification suggestions
      function generateSimplificationSuggestions(text, words, sentences) {
        // Check for long sentences
        const longSentences = sentences.filter((sentence) => {
          const sentenceWords = sentence.match(/\b\w+\b/g) || [];
          return sentenceWords.length > 25;
        });

        // Check for complex words (words with 3+ syllables)
        const complexWords = words.filter((word) => {
          return (
            countWordSyllables(word.toLowerCase()) >= 3 &&
            !isCommonComplexWord(word.toLowerCase())
          );
        });

        // Check for redundant phrases
        const redundantPhrases = [
          "absolutely essential",
          "actual fact",
          "advance planning",
          "advance warning",
          "basic fundamentals",
          "blend together",
          "close proximity",
          "completely eliminate",
          "current status",
          "end result",
          "final outcome",
          "free gift",
          "future plans",
          "general consensus",
          "important essentials",
          "new innovation",
          "past history",
          "personal opinion",
          "repeat again",
          "revert back",
          "sum total",
          "unexpected surprise",
        ];

        let redundantFound = [];

        redundantPhrases.forEach((phrase) => {
          const regex = new RegExp(`\\b${phrase}\\b`, "gi");
          const matches = text.match(regex) || [];

          matches.forEach((match) => {
            redundantFound.push(match);
          });
        });

        // Generate suggestions
        let suggestions = "";

        if (longSentences.length > 0) {
          suggestions += `
            <div class="suggestion-item">
              <div class="suggestion-title">
                Simplify Long Sentences
                <button class="action-btn" onclick="toggleSuggestionDetails(this)">Show Details</button>
              </div>
              <div class="suggestion-content" style="display: none;">
                <p>Found ${
                  longSentences.length
                } sentences that are over 25 words long. Long sentences can be difficult to follow.</p>
                <p>Example long sentence:</p>
                <p class="warning-text">${longSentences[0].trim()}</p>
                <p>Consider breaking this into two or more shorter sentences for clarity.</p>
                <div class="suggestion-actions">
                  <button class="suggestion-btn secondary">Ignore</button>
                  <button class="suggestion-btn">Apply Suggestion</button>
                </div>
              </div>
            </div>
          `;
        }

        if (complexWords.length > 0) {
          // Get unique complex words
          const uniqueComplexWords = [...new Set(complexWords)];

          // Get top 5 complex words
          const topComplexWords = uniqueComplexWords.slice(0, 5);

          // Get simpler alternatives
          const simplifications = topComplexWords.map((word) => {
            return {
              complex: word,
              simple: getSimplerAlternative(word.toLowerCase()),
            };
          });

          suggestions += `
            <div class="suggestion-item">
              <div class="suggestion-title">
                Replace Complex Words
                <button class="action-btn" onclick="toggleSuggestionDetails(this)">Show Details</button>
              </div>
              <div class="suggestion-content" style="display: none;">
                <p>Found ${uniqueComplexWords.length} complex words that could be simplified.</p>
                <p>Consider replacing these complex words with simpler alternatives:</p>
                <ul class="analysis-list">
          `;

          simplifications.forEach((item) => {
            if (item.simple) {
              suggestions += `<li class="analysis-item"><span class="warning-text">${item.complex}</span> → <span class="success-text">${item.simple}</span></li>`;
            }
          });

          suggestions += `
                </ul>
                <div class="suggestion-actions">
                  <button class="suggestion-btn secondary">Ignore</button>
                  <button class="suggestion-btn">Apply Suggestions</button>
                </div>
              </div>
            </div>
          `;
        }

        if (redundantFound.length > 0) {
          // Get unique redundant phrases
          const uniqueRedundant = [...new Set(redundantFound)];

          suggestions += `
            <div class="suggestion-item">
              <div class="suggestion-title">
                Remove Redundant Phrases
                <button class="action-btn" onclick="toggleSuggestionDetails(this)">Show Details</button>
              </div>
              <div class="suggestion-content" style="display: none;">
                <p>Found ${uniqueRedundant.length} redundant phrases that could be simplified.</p>
                <ul class="analysis-list">
          `;

          uniqueRedundant.forEach((phrase) => {
            const simplified = simplifyRedundantPhrase(phrase);
            suggestions += `<li class="analysis-item"><span class="warning-text">${phrase}</span> → <span class="success-text">${simplified}</span></li>`;
          });

          suggestions += `
                </ul>
                <div class="suggestion-actions">
                  <button class="suggestion-btn secondary">Ignore</button>
                  <button class="suggestion-btn">Apply Suggestions</button>
                </div>
              </div>
            </div>
          `;
        }

        if (suggestions === "") {
          document.getElementById("simplificationSuggestions").innerHTML =
            "<p>No specific simplification suggestions for your text. It appears to be written in a clear and accessible style.</p>";
        } else {
          document.getElementById("simplificationSuggestions").innerHTML =
            "<p>Here are some suggestions to simplify your text:</p>";
          document.getElementById("suggestionsContainer").innerHTML =
            suggestions;
        }
      }

      // Generate text preview with highlights
      function generateTextPreview(text) {
        // Highlight long sentences
        const sentences = text.match(/[^.!?]+[.!?]+/g) || [];
        let highlightedText = text;

        // Highlight long sentences (more than 25 words)
        sentences.forEach((sentence) => {
          const words = sentence.match(/\b\w+\b/g) || [];
          if (words.length > 25) {
            highlightedText = highlightedText.replace(
              sentence,
              `<span class="warning">${sentence}</span>`
            );
          }
        });

        // Highlight passive voice
        const passivePatterns = [
          /\b(?:am|is|are|was|were|be|been|being)\s+\w+ed\b/gi,
          /\b(?:am|is|are|was|were|be|been|being)\s+\w+en\b/gi,
          /\b(?:has|have|had)\s+been\s+\w+ed\b/gi,
          /\b(?:has|have|had)\s+been\s+\w+en\b/gi,
        ];

        passivePatterns.forEach((pattern) => {
          highlightedText = highlightedText.replace(
            pattern,
            (match) => `<span class="error">${match}</span>`
          );
        });

        // Highlight filler words
        fillerWords.forEach((filler) => {
          const regex = new RegExp(`\\b${filler}\\b`, "gi");
          highlightedText = highlightedText.replace(
            regex,
            (match) => `<span class="error">${match}</span>`
          );
        });

        // Format paragraphs
        const formattedText = highlightedText
          .split(/\n\s*\n/)
          .map((p) => `<p>${p}</p>`)
          .join("");

        document.getElementById("textPreview").innerHTML =
          formattedText || "<p>No text to preview.</p>";
      }

      // Analyze keywords
      function analyzeKeywords(words) {
        if (words.length === 0) {
          document.getElementById("keywordAnalysis").innerHTML =
            "<p>No words detected in the text.</p>";
          return;
        }

        // Filter out common words and short words
        const keywords = words.filter((word) => {
          return word.length > 3 && !commonWords.includes(word.toLowerCase());
        });

        // Count keyword occurrences
        const keywordCounts = {};

        keywords.forEach((word) => {
          const lowerWord = word.toLowerCase();
          keywordCounts[lowerWord] = (keywordCounts[lowerWord] || 0) + 1;
        });

        // Sort by frequency
        const sortedKeywords = Object.entries(keywordCounts).sort(
          (a, b) => b[1] - a[1]
        );

        // Get top 10 keywords
        const topKeywords = sortedKeywords.slice(0, 10);

        if (topKeywords.length === 0) {
          document.getElementById("keywordAnalysis").innerHTML =
            "<p>No significant keywords detected in the text.</p>";
          return;
        }

        let analysis = `
          <p>Top keywords in your text:</p>
          <ul class="analysis-list">
        `;

        topKeywords.forEach(([keyword, count]) => {
          const percentage = Math.round((count / words.length) * 100);
          analysis += `<li class="analysis-item"><span class="highlighted-text">${keyword}</span>: ${count} occurrences (${percentage}% of total words)</li>`;
        });

        analysis += "</ul>";

        // Check for keyword density issues
        const highestDensity = topKeywords[0][1] / words.length;

        if (highestDensity > 0.05) {
          analysis += `<p>The keyword "${topKeywords[0][0]}" appears very frequently in your text. Consider using synonyms to avoid repetition.</p>`;
        }

        document.getElementById("keywordAnalysis").innerHTML = analysis;
      }

      // Helper function: Check if a word is a common complex word
      function isCommonComplexWord(word) {
        const commonComplexWords = [
          "education",
          "university",
          "government",
          "development",
          "information",
          "technology",
          "experience",
          "environment",
          "understanding",
          "relationship",
          "organization",
          "communication",
          "opportunity",
          "responsibility",
          "community",
        ];

        return commonComplexWords.includes(word);
      }

      // Helper function: Get simpler alternative for complex words
      function getSimplerAlternative(word) {
        const simplifications = {
          utilize: "use",
          implementation: "use",
          methodology: "method",
          facilitate: "help",
          endeavor: "try",
          commence: "start",
          terminate: "end",
          sufficient: "enough",
          assistance: "help",
          demonstrate: "show",
          purchase: "buy",
          inquire: "ask",
          additional: "more",
          numerous: "many",
          obtain: "get",
          regarding: "about",
          subsequently: "later",
          approximately: "about",
          currently: "now",
          previously: "before",
          consequently: "so",
          furthermore: "also",
          nevertheless: "still",
          therefore: "so",
          however: "but",
          accordingly: "so",
          additionally: "also",
          subsequently: "then",
          furthermore: "also",
          moreover: "also",
        };

        return simplifications[word] || null;
      }

      // Helper function: Simplify redundant phrases
      function simplifyRedundantPhrase(phrase) {
        const simplifications = {
          "absolutely essential": "essential",
          "actual fact": "fact",
          "advance planning": "planning",
          "advance warning": "warning",
          "basic fundamentals": "fundamentals",
          "blend together": "blend",
          "close proximity": "proximity",
          "completely eliminate": "eliminate",
          "current status": "status",
          "end result": "result",
          "final outcome": "outcome",
          "free gift": "gift",
          "future plans": "plans",
          "general consensus": "consensus",
          "important essentials": "essentials",
          "new innovation": "innovation",
          "past history": "history",
          "personal opinion": "opinion",
          "repeat again": "repeat",
          "revert back": "revert",
          "sum total": "total",
          "unexpected surprise": "surprise",
        };

        const lowerPhrase = phrase.toLowerCase();
        return simplifications[lowerPhrase] || phrase;
      }

      // Toggle suggestion details
      function toggleSuggestionDetails(button) {
        const content = button.parentElement.nextElementSibling;

        if (content.style.display === "none") {
          content.style.display = "block";
          button.textContent = "Hide Details";
        } else {
          content.style.display = "none";
          button.textContent = "Show Details";
        }
      }

      // Show toast notification
      function showToast(message, type = "success") {
        // Set toast icon based on type
        let icon = "";

        switch (type) {
          case "success":
            icon = "✅";
            break;
          case "error":
            icon = "❌";
            break;
          case "warning":
            icon = "⚠️";
            break;
          default:
            icon = "ℹ️";
        }

        toastIcon.textContent = icon;
        toastMessage.textContent = message;

        // Remove existing classes
        toast.classList.remove("success", "error", "warning");

        // Add new class
        toast.classList.add(type);

        // Show toast
        toast.classList.add("show");

        // Hide toast after 3 seconds
        setTimeout(hideToast, 3000);
      }

      // Hide toast notification
      function hideToast() {
        toast.classList.remove("show");
      }
    </script>
    <script src="/js/script.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Citation Generator | School Tools Hub</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap");

      :root {
        --primary: #58a6ff;
        --primary-hover: #1f6feb;
        --bg-dark: #0d1117;
        --bg-card: #161b22;
        --text-light: #c9d1d9;
        --text-muted: #8b949e;
        --border: #30363d;
        --shadow: rgba(88, 166, 255, 0.2);
        --danger: #f85149;
        --success: #56d364;
        --warning: #e3b341;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Poppins", sans-serif;
        background: var(--bg-dark);
        color: var(--text-light);
        padding: 20px;
        transition: all 0.3s ease;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      .theme-toggle {
        position: absolute;
        top: 20px;
        right: 20px;
        background: transparent;
        border: 1px solid var(--border);
        color: var(--text-light);
        padding: 8px 12px;
        border-radius: 20px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        z-index: 100;
      }

      .theme-toggle:hover {
        background: rgba(255, 255, 255, 0.1);
      }

      .container {
        max-width: 1000px;
        margin: 40px auto;
        background: var(--bg-card);
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        border: 1px solid var(--border);
        flex-grow: 1;
      }

      .back-btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        color: var(--text-muted);
        text-decoration: none;
        margin-bottom: 20px;
        transition: all 0.3s ease;
      }

      .back-btn:hover {
        color: var(--primary);
      }

      h1 {
        text-align: center;
        color: var(--primary);
        margin-bottom: 10px;
        font-size: 2.2rem;
      }

      .description {
        text-align: center;
        color: var(--text-muted);
        margin-bottom: 30px;
        line-height: 1.6;
      }

      /* Hamburger Menu Styles */
      .hamburger-menu {
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 1000;
        cursor: pointer;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 8px;
        transition: all 0.3s ease;
      }

      .hamburger-menu:hover {
        border-color: var(--primary);
      }

      .hamburger-icon {
        width: 24px;
        height: 24px;
        position: relative;
      }

      .hamburger-icon span {
        display: block;
        position: absolute;
        height: 2px;
        width: 100%;
        background: var(--text-light);
        border-radius: 2px;
        opacity: 1;
        left: 0;
        transform: rotate(0deg);
        transition: all 0.3s ease;
      }

      .hamburger-icon span:nth-child(1) {
        top: 6px;
      }

      .hamburger-icon span:nth-child(2),
      .hamburger-icon span:nth-child(3) {
        top: 12px;
      }

      .hamburger-icon span:nth-child(4) {
        top: 18px;
      }

      .hamburger-menu.open .hamburger-icon span:nth-child(1),
      .hamburger-menu.open .hamburger-icon span:nth-child(4) {
        width: 0%;
        left: 50%;
        opacity: 0;
      }

      .hamburger-menu.open .hamburger-icon span:nth-child(2) {
        transform: rotate(45deg);
      }

      .hamburger-menu.open .hamburger-icon span:nth-child(3) {
        transform: rotate(-45deg);
      }

      .nav-menu {
        position: fixed;
        top: 0;
        left: -300px;
        width: 300px;
        height: 100%;
        background: var(--bg-card);
        border-right: 1px solid var(--border);
        z-index: 999;
        transition: all 0.3s ease;
        overflow-y: auto;
        padding: 80px 20px 20px;
      }

      .nav-menu.open {
        left: 0;
      }

      .nav-menu-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 998;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .nav-menu-overlay.open {
        opacity: 1;
        visibility: visible;
      }

      .nav-menu-title {
        font-size: 1.2rem;
        color: var(--primary);
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--border);
      }

      .nav-menu-list {
        list-style-type: none;
      }

      .nav-menu-item {
        margin-bottom: 10px;
      }

      .nav-menu-link {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px;
        border-radius: 8px;
        color: var(--text-light);
        text-decoration: none;
        transition: all 0.3s ease;
      }

      .nav-menu-link:hover {
        background: rgba(88, 166, 255, 0.1);
      }

      .nav-menu-link.active {
        background: var(--primary);
        color: white;
      }

      .nav-menu-icon {
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* Toast Notification Styles */
      .toast {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 12px 20px;
        border-radius: 8px;
        color: white;
        font-size: 0.9rem;
        z-index: 1000;
        opacity: 0;
        transform: translateY(-20px);
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .toast.success {
        background: var(--success);
      }

      .toast.error {
        background: var(--danger);
      }

      .toast.warning {
        background: var(--warning);
      }

      .toast.show {
        opacity: 1;
        transform: translateY(0);
      }

      .toast-icon {
        font-size: 1.2rem;
      }

      .toast-message {
        flex: 1;
      }

      .toast-close {
        background: transparent;
        border: none;
        color: white;
        cursor: pointer;
        font-size: 1.2rem;
        opacity: 0.7;
        transition: opacity 0.3s ease;
      }

      .toast-close:hover {
        opacity: 1;
      }

      /* Citation Generator Specific Styles */
      .citation-container {
        display: flex;
        flex-direction: column;
        gap: 30px;
      }

      .citation-tabs {
        display: flex;
        border-bottom: 1px solid var(--border);
        margin-bottom: 20px;
      }

      .citation-tab {
        padding: 10px 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        border-bottom: 2px solid transparent;
        color: var(--text-muted);
      }

      .citation-tab.active {
        border-bottom: 2px solid var(--primary);
        color: var(--primary);
        font-weight: 500;
      }

      .citation-tab:hover:not(.active) {
        background: rgba(255, 255, 255, 0.05);
      }

      .citation-content {
        display: none;
      }

      .citation-content.active {
        display: block;
      }

      .url-input-container {
        position: relative;
        margin-bottom: 20px;
      }

      .url-input {
        width: 100%;
        padding: 12px 15px;
        padding-right: 50px;
        border-radius: 8px;
        border: 1px solid var(--border);
        background: var(--bg-dark);
        color: var(--text-light);
        font-family: "Poppins", sans-serif;
        font-size: 1rem;
        transition: all 0.3s ease;
      }

      .url-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 2px var(--shadow);
      }

      .fetch-btn {
        position: absolute;
        right: 5px;
        top: 5px;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 6px;
        padding: 8px 12px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .fetch-btn:hover {
        background: var(--primary-hover);
      }

      .citation-form {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
      }

      .form-group {
        display: flex;
        flex-direction: column;
        gap: 5px;
      }

      .form-label {
        font-size: 0.9rem;
        color: var(--text-muted);
      }

      .form-input {
        padding: 10px 12px;
        border-radius: 6px;
        border: 1px solid var(--border);
        background: var(--bg-dark);
        color: var(--text-light);
        font-family: "Poppins", sans-serif;
        transition: all 0.3s ease;
      }

      .form-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 2px var(--shadow);
      }

      .citation-styles {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 20px;
      }

      .style-btn {
        padding: 8px 15px;
        border-radius: 20px;
        border: 1px solid var(--border);
        background: var(--bg-dark);
        color: var(--text-light);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .style-btn.active {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
      }

      .style-btn:hover:not(.active) {
        border-color: var(--primary);
        background: rgba(88, 166, 255, 0.1);
      }

      .generate-btn {
        width: 100%;
        padding: 12px;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 20px;
      }

      .generate-btn:hover {
        background: var(--primary-hover);
        transform: translateY(-2px);
      }

      .citation-result {
        background: var(--bg-dark);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
      }

      .result-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--border);
      }

      .result-title {
        font-size: 1.1rem;
        color: var(--primary);
      }

      .result-actions {
        display: flex;
        gap: 10px;
      }

      .action-btn {
        background: transparent;
        border: 1px solid var(--border);
        color: var(--text-light);
        padding: 6px 12px;
        border-radius: 6px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 5px;
        transition: all 0.3s ease;
      }

      .action-btn:hover {
        border-color: var(--primary);
        background: rgba(88, 166, 255, 0.1);
      }

      .action-btn.copy {
        background: var(--success);
        color: white;
        border-color: var(--success);
      }

      .action-btn.copy:hover {
        background: #28a745;
      }

      .citation-text {
        line-height: 1.6;
        padding: 10px;
        border-radius: 6px;
        background: rgba(0, 0, 0, 0.2);
        margin-bottom: 15px;
      }

      .citation-preview {
        margin-top: 20px;
      }

      .preview-title {
        font-size: 1rem;
        color: var(--text-muted);
        margin-bottom: 10px;
      }

      .preview-content {
        padding: 15px;
        border-radius: 8px;
        background: rgba(0, 0, 0, 0.2);
        line-height: 1.6;
      }

      .saved-citations {
        margin-top: 30px;
      }

      .saved-title {
        font-size: 1.2rem;
        color: var(--primary);
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--border);
      }

      .citation-list {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .citation-item {
        background: var(--bg-dark);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 15px;
        transition: all 0.3s ease;
      }

      .citation-item:hover {
        border-color: var(--primary);
        transform: translateY(-2px);
      }

      .citation-item-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }

      .citation-item-title {
        font-weight: 500;
      }

      .citation-item-style {
        font-size: 0.8rem;
        color: var(--text-muted);
        background: rgba(88, 166, 255, 0.1);
        padding: 3px 8px;
        border-radius: 12px;
      }

      .citation-item-text {
        line-height: 1.6;
        font-size: 0.9rem;
      }

      .citation-item-actions {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        margin-top: 10px;
      }

      .loading {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
      }

      .spinner {
        width: 30px;
        height: 30px;
        border: 3px solid rgba(88, 166, 255, 0.3);
        border-radius: 50%;
        border-top-color: var(--primary);
        animation: spin 1s ease-in-out infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      .no-citations {
        text-align: center;
        color: var(--text-muted);
        padding: 20px;
      }

      footer {
        text-align: center;
        margin-top: 40px;
        color: var(--text-muted);
        font-size: 0.9rem;
        padding: 20px 0;
        border-top: 1px solid var(--border);
      }

      .social-links {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 10px;
      }

      .social-link {
        color: var(--text-muted);
        text-decoration: none;
        transition: all 0.3s ease;
      }

      .social-link:hover {
        color: var(--primary);
      }

      /* Light theme */
      body.light-theme {
        --primary: #0066cc;
        --primary-hover: #0052a3;
        --bg-dark: #f5f8fa;
        --bg-card: #ffffff;
        --text-light: #24292e;
        --text-muted: #586069;
        --border: #e1e4e8;
        --shadow: rgba(0, 102, 204, 0.2);
        --danger: #d73a49;
        --success: #28a745;
        --warning: #f1c40f;
      }

      /* Responsive styles */
      @media (max-width: 768px) {
        .container {
          padding: 20px;
          margin: 20px auto;
        }

        h1 {
          font-size: 1.8rem;
        }

        .description {
          font-size: 0.9rem;
        }

        .citation-form {
          grid-template-columns: 1fr;
        }

        .hamburger-menu {
          top: 15px;
          left: 15px;
        }

        .theme-toggle {
          top: 15px;
          right: 15px;
          padding: 6px 10px;
          font-size: 0.9rem;
        }

        .citation-tabs {
          overflow-x: auto;
          white-space: nowrap;
          padding-bottom: 5px;
        }

        .citation-tab {
          padding: 8px 15px;
          font-size: 0.9rem;
        }
      }

      @media (max-width: 480px) {
        .container {
          padding: 15px;
          margin: 15px auto;
        }

        .hamburger-menu {
          top: 10px;
          left: 10px;
          width: 35px;
          height: 35px;
        }

        .theme-toggle {
          top: 10px;
          right: 10px;
          padding: 5px 8px;
          font-size: 0.8rem;
        }

        h1 {
          font-size: 1.5rem;
          margin-top: 20px;
        }

        .nav-menu {
          width: 250px;
          left: -250px;
        }

        .result-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 10px;
        }

        .result-actions {
          width: 100%;
          justify-content: space-between;
        }
      }

      :root {
        --primary: #58a6ff;
        --primary-hover: #1f6feb;
        --bg-dark: #0d1117;
        --bg-card: #161b22;
        --text-light: #c9d1d9;
        --text-muted: #8b949e;
        --border: #30363d;
        --shadow: rgba(88, 166, 255, 0.2);
        --danger: #f85149;
        --success: #56d364;
        --warning: #e3b341;
      }

      /* Hamburger Menu Styles */
      .hamburger-menu {
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 1000;
        cursor: pointer;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 8px;
        transition: all 0.3s ease;
      }

      .hamburger-menu:hover {
        border-color: var(--primary);
      }

      .hamburger-icon {
        width: 24px;
        height: 24px;
        position: relative;
      }

      .hamburger-icon span {
        display: block;
        position: absolute;
        height: 2px;
        width: 100%;
        background: var(--text-light);
        border-radius: 2px;
        opacity: 1;
        left: 0;
        transform: rotate(0deg);
        transition: all 0.3s ease;
      }

      .hamburger-icon span:nth-child(1) {
        top: 6px;
      }

      .hamburger-icon span:nth-child(2),
      .hamburger-icon span:nth-child(3) {
        top: 12px;
      }

      .hamburger-icon span:nth-child(4) {
        top: 18px;
      }

      .hamburger-menu.open .hamburger-icon span:nth-child(1),
      .hamburger-menu.open .hamburger-icon span:nth-child(4) {
        width: 0%;
        left: 50%;
        opacity: 0;
      }

      .hamburger-menu.open .hamburger-icon span:nth-child(2) {
        transform: rotate(45deg);
      }

      .hamburger-menu.open .hamburger-icon span:nth-child(3) {
        transform: rotate(-45deg);
      }

      .nav-menu {
        position: fixed;
        top: 0;
        left: -300px;
        width: 300px;
        height: 100%;
        background: var(--bg-card);
        border-right: 1px solid var(--border);
        z-index: 999;
        transition: all 0.3s ease;
        overflow-y: auto;
        padding: 50px 20px 20px;
      }

      .nav-menu.open {
        left: 0;
      }

      .nav-menu-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 998;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .nav-menu-overlay.open {
        opacity: 1;
        visibility: visible;
      }

      .nav-menu-title {
        font-size: 1.2rem;
        color: var(--primary);
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--border);
      }

      .nav-menu-list {
        list-style-type: none;
      }

      .nav-menu-item {
        margin-bottom: 10px;
      }

      .nav-menu-link {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px;
        border-radius: 8px;
        color: var(--text-light);
        text-decoration: none;
        transition: all 0.3s ease;
      }

      .nav-menu-link:hover {
        background: rgba(88, 166, 255, 0.1);
      }

      .nav-menu-link.active {
        background: var(--primary);
        color: white;
      }

      .nav-menu-icon {
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* Theme Toggle Button */
      .theme-toggle {
        position: absolute;
        top: 20px;
        right: 20px;
        background: transparent;
        border: 1px solid var(--border);
        color: var(--text-light);
        padding: 8px 12px;
        border-radius: 20px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        z-index: 100;
      }

      .theme-toggle:hover {
        background: rgba(255, 255, 255, 0.1);
      }

      /* Toast Notification Styles */
      .toast {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 12px 20px;
        border-radius: 8px;
        color: white;
        font-size: 0.9rem;
        z-index: 1000;
        opacity: 0;
        transform: translateY(-20px);
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .toast.success {
        background: var(--success);
      }

      .toast.error {
        background: var(--danger);
      }

      .toast.warning {
        background: var(--warning);
      }

      .toast.show {
        opacity: 1;
        transform: translateY(0);
      }

      .toast-icon {
        font-size: 1.2rem;
      }

      .toast-message {
        flex: 1;
      }

      .toast-close {
        background: transparent;
        border: none;
        color: white;
        cursor: pointer;
        font-size: 1.2rem;
        opacity: 0.7;
        transition: opacity 0.3s ease;
      }

      .toast-close:hover {
        opacity: 1;
      }

      /* Footer Styles */
      footer {
        text-align: center;
        margin-top: 40px;
        color: var(--text-muted);
        font-size: 0.9rem;
        padding: 20px 0;
        border-top: 1px solid var(--border);
      }

      .social-links {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 10px;
      }

      .social-link {
        color: var(--text-muted);
        text-decoration: none;
        transition: all 0.3s ease;
      }

      .social-link:hover {
        color: var(--primary);
      }

      /* Light theme */
      body.light-theme {
        --primary: #0066cc;
        --primary-hover: #0052a3;
        --bg-dark: #f5f8fa;
        --bg-card: #ffffff;
        --text-light: #24292e;
        --text-muted: #586069;
        --border: #e1e4e8;
        --shadow: rgba(0, 102, 204, 0.2);
        --danger: #d73a49;
        --success: #28a745;
        --warning: #f1c40f;
      }

      /* Responsive styles */
      @media (max-width: 768px) {
        .hamburger-menu {
          top: 15px;
          left: 15px;
        }

        .theme-toggle {
          top: 15px;
          right: 15px;
          padding: 6px 10px;
          font-size: 0.9rem;
        }
      }

      @media (max-width: 480px) {
        .hamburger-menu {
          top: 10px;
          left: 10px;
          width: 35px;
          height: 35px;
        }

        .theme-toggle {
          top: 10px;
          right: 10px;
          padding: 5px 8px;
          font-size: 0.8rem;
        }

        .nav-menu {
          width: 250px;
          left: -250px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Hamburger Menu -->
    <div class="hamburger-menu" id="hamburgerMenu">
      <div class="hamburger-icon">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>

    <!-- Navigation Menu -->
    <div class="nav-menu" id="navMenu">
      <h2 class="nav-menu-title">School Tools Hub</h2>
      <ul class="nav-menu-list">
        <li class="nav-menu-item">
          <a href="gwa_calculator.html" class="nav-menu-link">
            <span>GWA Calculator</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="general_average_counter.html" class="nav-menu-link">
            <span>General Average</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="pomodoro_timer.html" class="nav-menu-link">
            <span>Pomodoro Timer</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="unit_converter.html" class="nav-menu-link">
            <span>Unit Converter</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="dictionary.html" class="nav-menu-link">
            <span>Dictionary</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="word_counter.html" class="nav-menu-link">
            <span>Word Counter</span>
          </a>
        </li>

        <li class="nav-menu-item">
          <a href="typing_test.html" class="nav-menu-link">
            <span>Typing Test</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="readability_checker.html" class="nav-menu-link">
            <span>Readability Checker</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="citation_generator.html" class="nav-menu-link">
            <span>Citation Generator</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="text_case_converter.html" class="nav-menu-link">
            <span>Text Case Converter</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="word_counter.html" class="nav-menu-link">
            <span>Word Counter</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="physics_calculator.html" class="nav-menu-link">
            <span>Physics Calculator</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="bmi_calculator.html" class="nav-menu-link">
            <span>BMI Calculator</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="statistical_calculator.html" class="nav-menu-link">
            <span>Statistical Calculator</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="trigonometry_solver.html" class="nav-menu-link">
            <span>Trigonometry Solver</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="data_sorting.html" class="nav-menu-link">
            <span>Data Sorting</span>
          </a>
        </li>
        <li class="nav-menu-item">
          <a href="metadata_viewer.html" class="nav-menu-link">
            <span>Metadata Viewer</span>
          </a>
        </li>
      </ul>
    </div>
    <div class="nav-menu-overlay" id="navMenuOverlay"></div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
      <div class="toast-icon" id="toastIcon"></div>
      <div class="toast-message" id="toastMessage"></div>
      <button class="toast-close" id="toastClose">×</button>
    </div>

    <!-- Theme Toggle Button -->
    <button class="theme-toggle" onclick="toggleTheme()">
      <span id="theme-icon">🌙</span> <span id="theme-text">Dark Mode</span>
    </button>

    <div class="container">
      <a href="../index.html" class="back-btn">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          width="24"
          height="24"
          color="#d3d3d3"
          fill="none">
          <path
            d="M15 6C15 6 9.00001 10.4189 9 12C8.99999 13.5812 15 18 15 18"
            stroke="currentColor"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round" />
        </svg>
        Back to Home
      </a>

      <h1>Citation Generator</h1>
      <p class="description"
        >Generate citations in APA, MLA, Chicago, Harvard, and other formats for
        books, websites, journals, and more.</p
      >

      <div class="citation-container">
        <div class="citation-tabs">
          <div class="citation-tab active" data-tab="website">Website</div>
          <div class="citation-tab" data-tab="book">Book</div>
          <div class="citation-tab" data-tab="journal">Journal</div>
          <div class="citation-tab" data-tab="newspaper">Newspaper</div>
          <div class="citation-tab" data-tab="video">Video</div>
        </div>

        <div class="citation-content active" id="websiteTab">
          <div class="url-input-container">
            <input
              type="text"
              class="url-input"
              id="websiteUrl"
              placeholder="Enter website URL (e.g., https://example.com)" />
            <button class="fetch-btn" id="fetchUrlBtn">Fetch</button>
          </div>

          <div class="citation-form">
            <div class="form-group">
              <label class="form-label" for="websiteTitle">Title</label>
              <input
                type="text"
                class="form-input"
                id="websiteTitle"
                placeholder="Website Title" />
            </div>
            <div class="form-group">
              <label class="form-label" for="websiteAuthor"
                >Author/Organization</label
              >
              <input
                type="text"
                class="form-input"
                id="websiteAuthor"
                placeholder="Author or Organization Name" />
            </div>
            <div class="form-group">
              <label class="form-label" for="websitePublisher"
                >Publisher/Website Name</label
              >
              <input
                type="text"
                class="form-input"
                id="websitePublisher"
                placeholder="Publisher or Website Name" />
            </div>
            <div class="form-group">
              <label class="form-label" for="websiteDate"
                >Publication Date</label
              >
              <input type="date" class="form-input" id="websiteDate" />
            </div>
            <div class="form-group">
              <label class="form-label" for="websiteAccessDate"
                >Access Date</label
              >
              <input
                type="date"
                class="form-input"
                id="websiteAccessDate"
                value="" />
            </div>
            <div class="form-group">
              <label class="form-label" for="websiteUrl2">URL</label>
              <input
                type="text"
                class="form-input"
                id="websiteUrl2"
                placeholder="https://example.com" />
            </div>
          </div>
        </div>

        <div class="citation-content" id="bookTab">
          <div class="citation-form">
            <div class="form-group">
              <label class="form-label" for="bookTitle">Book Title</label>
              <input
                type="text"
                class="form-input"
                id="bookTitle"
                placeholder="Book Title" />
            </div>
            <div class="form-group">
              <label class="form-label" for="bookAuthor">Author</label>
              <input
                type="text"
                class="form-input"
                id="bookAuthor"
                placeholder="Author Name" />
            </div>
            <div class="form-group">
              <label class="form-label" for="bookPublisher">Publisher</label>
              <input
                type="text"
                class="form-input"
                id="bookPublisher"
                placeholder="Publisher Name" />
            </div>
            <div class="form-group">
              <label class="form-label" for="bookYear">Publication Year</label>
              <input
                type="number"
                class="form-input"
                id="bookYear"
                placeholder="2023" />
            </div>
            <div class="form-group">
              <label class="form-label" for="bookEdition">Edition</label>
              <input
                type="text"
                class="form-input"
                id="bookEdition"
                placeholder="e.g., 2nd Edition" />
            </div>
            <div class="form-group">
              <label class="form-label" for="bookCity"
                >City of Publication</label
              >
              <input
                type="text"
                class="form-input"
                id="bookCity"
                placeholder="City Name" />
            </div>
            <div class="form-group">
              <label class="form-label" for="bookIsbn">ISBN</label>
              <input
                type="text"
                class="form-input"
                id="bookIsbn"
                placeholder="ISBN Number" />
            </div>
          </div>
        </div>

        <div class="citation-content" id="journalTab">
          <div class="citation-form">
            <div class="form-group">
              <label class="form-label" for="journalTitle">Article Title</label>
              <input
                type="text"
                class="form-input"
                id="journalTitle"
                placeholder="Article Title" />
            </div>
            <div class="form-group">
              <label class="form-label" for="journalAuthor">Author</label>
              <input
                type="text"
                class="form-input"
                id="journalAuthor"
                placeholder="Author Name" />
            </div>
            <div class="form-group">
              <label class="form-label" for="journalName">Journal Name</label>
              <input
                type="text"
                class="form-input"
                id="journalName"
                placeholder="Journal Name" />
            </div>
            <div class="form-group">
              <label class="form-label" for="journalVolume">Volume</label>
              <input
                type="text"
                class="form-input"
                id="journalVolume"
                placeholder="e.g., 12" />
            </div>
            <div class="form-group">
              <label class="form-label" for="journalIssue">Issue</label>
              <input
                type="text"
                class="form-input"
                id="journalIssue"
                placeholder="e.g., 3" />
            </div>
            <div class="form-group">
              <label class="form-label" for="journalYear"
                >Publication Year</label
              >
              <input
                type="number"
                class="form-input"
                id="journalYear"
                placeholder="2023" />
            </div>
            <div class="form-group">
              <label class="form-label" for="journalPages">Pages</label>
              <input
                type="text"
                class="form-input"
                id="journalPages"
                placeholder="e.g., 45-67" />
            </div>
            <div class="form-group">
              <label class="form-label" for="journalDoi">DOI</label>
              <input
                type="text"
                class="form-input"
                id="journalDoi"
                placeholder="DOI Number" />
            </div>
          </div>
        </div>

        <div class="citation-content" id="newspaperTab">
          <div class="citation-form">
            <div class="form-group">
              <label class="form-label" for="newspaperTitle"
                >Article Title</label
              >
              <input
                type="text"
                class="form-input"
                id="newspaperTitle"
                placeholder="Article Title" />
            </div>
            <div class="form-group">
              <label class="form-label" for="newspaperAuthor">Author</label>
              <input
                type="text"
                class="form-input"
                id="newspaperAuthor"
                placeholder="Author Name" />
            </div>
            <div class="form-group">
              <label class="form-label" for="newspaperName"
                >Newspaper Name</label
              >
              <input
                type="text"
                class="form-input"
                id="newspaperName"
                placeholder="Newspaper Name" />
            </div>
            <div class="form-group">
              <label class="form-label" for="newspaperDate"
                >Publication Date</label
              >
              <input type="date" class="form-input" id="newspaperDate" />
            </div>
            <div class="form-group">
              <label class="form-label" for="newspaperPages">Pages</label>
              <input
                type="text"
                class="form-input"
                id="newspaperPages"
                placeholder="e.g., A1, B3" />
            </div>
            <div class="form-group">
              <label class="form-label" for="newspaperUrl"
                >URL (if online)</label
              >
              <input
                type="text"
                class="form-input"
                id="newspaperUrl"
                placeholder="https://example.com" />
            </div>
          </div>
        </div>

        <div class="citation-content" id="videoTab">
          <div class="citation-form">
            <div class="form-group">
              <label class="form-label" for="videoTitle">Video Title</label>
              <input
                type="text"
                class="form-input"
                id="videoTitle"
                placeholder="Video Title" />
            </div>
            <div class="form-group">
              <label class="form-label" for="videoAuthor"
                >Creator/Channel</label
              >
              <input
                type="text"
                class="form-input"
                id="videoAuthor"
                placeholder="Creator or Channel Name" />
            </div>
            <div class="form-group">
              <label class="form-label" for="videoPublisher">Platform</label>
              <input
                type="text"
                class="form-input"
                id="videoPublisher"
                placeholder="e.g., YouTube, Vimeo" />
            </div>
            <div class="form-group">
              <label class="form-label" for="videoDate">Upload Date</label>
              <input type="date" class="form-input" id="videoDate" />
            </div>
            <div class="form-group">
              <label class="form-label" for="videoDuration">Duration</label>
              <input
                type="text"
                class="form-input"
                id="videoDuration"
                placeholder="e.g., 10:30" />
            </div>
            <div class="form-group">
              <label class="form-label" for="videoUrl">URL</label>
              <input
                type="text"
                class="form-input"
                id="videoUrl"
                placeholder="https://example.com" />
            </div>
          </div>
        </div>

        <div class="citation-styles">
          <button class="style-btn active" data-style="apa">APA</button>
          <button class="style-btn" data-style="mla">MLA</button>
          <button class="style-btn" data-style="chicago">Chicago</button>
          <button class="style-btn" data-style="harvard">Harvard</button>
          <button class="style-btn" data-style="ieee">IEEE</button>
          <button class="style-btn" data-style="ama">AMA</button>
        </div>

        <button class="generate-btn" id="generateBtn">Generate Citation</button>

        <div class="citation-result" id="citationResult" style="display: none">
          <div class="result-header">
            <div class="result-title">Citation Result</div>
            <div class="result-actions">
              <button class="action-btn copy" id="copyBtn">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  width="16"
                  height="16"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round">
                  <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                  <path
                    d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                </svg>
                Copy
              </button>
              <button class="action-btn" id="saveBtn">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  width="16"
                  height="16"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round">
                  <path
                    d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                  <polyline points="17 21 17 13 7 13 7 21"></polyline>
                  <polyline points="7 3 7 8 15 8"></polyline>
                </svg>
                Save
              </button>
            </div>
          </div>
          <div class="citation-text" id="citationText"></div>
          <div class="citation-preview">
            <div class="preview-title">Preview:</div>
            <div class="preview-content" id="previewContent"></div>
          </div>
        </div>

        <div class="saved-citations">
          <h3 class="saved-title">Saved Citations</h3>
          <div class="citation-list" id="savedCitationsList">
            <p class="no-citations">No saved citations yet.</p>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <p
        >Designed and developed by
        <a
          href="https://www.facebook.com/61560816188544"
          class="social-link"
          target="_blank"
          >@driyqnn</a
        >
        | &copy; 2025 School Tools Hub</p
      >
    </footer>

    <script>
      // DOM Elements
      const hamburgerMenu = document.getElementById("hamburgerMenu");
      const navMenu = document.getElementById("navMenu");
      const navMenuOverlay = document.getElementById("navMenuOverlay");
      const toast = document.getElementById("toast");
      const toastIcon = document.getElementById("toastIcon");
      const toastMessage = document.getElementById("toastMessage");
      const toastClose = document.getElementById("toastClose");
      const citationTabs = document.querySelectorAll(".citation-tab");
      const citationContents = document.querySelectorAll(".citation-content");
      const styleBtns = document.querySelectorAll(".style-btn");
      const generateBtn = document.getElementById("generateBtn");
      const fetchUrlBtn = document.getElementById("fetchUrlBtn");
      const websiteUrl = document.getElementById("websiteUrl");
      const websiteUrl2 = document.getElementById("websiteUrl2");
      const citationResult = document.getElementById("citationResult");
      const citationText = document.getElementById("citationText");
      const previewContent = document.getElementById("previewContent");
      const copyBtn = document.getElementById("copyBtn");
      const saveBtn = document.getElementById("saveBtn");
      const savedCitationsList = document.getElementById("savedCitationsList");
      const websiteAccessDate = document.getElementById("websiteAccessDate");

      // Set today's date as default for access date
      const today = new Date().toISOString().split("T")[0];
      websiteAccessDate.value = today;

      // Event Listeners
      document.addEventListener("DOMContentLoaded", function () {
        // Set up hamburger menu
        hamburgerMenu.addEventListener("click", toggleNavMenu);
        navMenuOverlay.addEventListener("click", closeNavMenu);

        // Set up toast close button
        toastClose.addEventListener("click", hideToast);

        // Set up citation tabs
        citationTabs.forEach((tab) => {
          tab.addEventListener("click", () => {
            switchTab(tab.getAttribute("data-tab"));
          });
        });

        // Set up citation styles
        styleBtns.forEach((btn) => {
          btn.addEventListener("click", () => {
            setActiveStyle(btn.getAttribute("data-style"));
          });
        });

        // Set up generate button
        generateBtn.addEventListener("click", generateCitation);

        // Set up fetch URL button
        fetchUrlBtn.addEventListener("click", fetchUrlMetadata);

        // Set up copy button
        copyBtn.addEventListener("click", copyToClipboard);

        // Set up save button
        saveBtn.addEventListener("click", saveCitation);

        // Sync URL fields
        websiteUrl.addEventListener("input", () => {
          websiteUrl2.value = websiteUrl.value;
        });

        websiteUrl2.addEventListener("input", () => {
          websiteUrl.value = websiteUrl2.value;
        });

        // Load saved citations
        loadSavedCitations();
      });

      // Theme toggle functionality
      function toggleTheme() {
        document.body.classList.toggle("light-theme");
        const isLight = document.body.classList.contains("light-theme");
        localStorage.setItem("theme", isLight ? "light" : "dark");
        updateThemeToggle();
      }

      function updateThemeToggle() {
        const isLight = document.body.classList.contains("light-theme");
        document.getElementById("theme-icon").textContent = isLight
          ? "☀️"
          : "🌙";
        document.getElementById("theme-text").textContent = isLight
          ? "Light Mode"
          : "Dark Mode";
      }

      // Load saved theme preference
      const savedTheme = localStorage.getItem("theme") || "dark";
      document.body.classList.toggle("light-theme", savedTheme === "light");
      updateThemeToggle();

      // Toggle navigation menu
      function toggleNavMenu() {
        hamburgerMenu.classList.toggle("open");
        navMenu.classList.toggle("open");
        navMenuOverlay.classList.toggle("open");
      }

      // Close navigation menu
      function closeNavMenu() {
        hamburgerMenu.classList.remove("open");
        navMenu.classList.remove("open");
        navMenuOverlay.classList.remove("open");
      }

      // Switch citation tab
      function switchTab(tabId) {
        citationTabs.forEach((tab) => {
          tab.classList.toggle(
            "active",
            tab.getAttribute("data-tab") === tabId
          );
        });

        citationContents.forEach((content) => {
          content.classList.toggle("active", content.id === `${tabId}Tab`);
        });
      }

      // Set active citation style
      function setActiveStyle(style) {
        styleBtns.forEach((btn) => {
          btn.classList.toggle(
            "active",
            btn.getAttribute("data-style") === style
          );
        });
      }

      // Show toast notification
      function showToast(message, type = "success") {
        // Set toast icon based on type
        let icon = "";

        switch (type) {
          case "success":
            icon = "✅";
            break;
          case "error":
            icon = "❌";
            break;
          case "warning":
            icon = "⚠️";
            break;
          default:
            icon = "ℹ️";
        }

        toastIcon.textContent = icon;
        toastMessage.textContent = message;

        // Remove existing classes
        toast.classList.remove("success", "error", "warning");

        // Add new class
        toast.classList.add(type);

        // Show toast
        toast.classList.add("show");

        // Hide toast after 3 seconds
        setTimeout(hideToast, 3000);
      }

      // Hide toast notification
      function hideToast() {
        toast.classList.remove("show");
      }

      // Fetch URL metadata
      async function fetchUrlMetadata() {
        const url = websiteUrl.value.trim();

        if (!url) {
          showToast("Please enter a URL", "warning");
          return;
        }

        if (!url.startsWith("http://") && !url.startsWith("https://")) {
          showToast(
            "Please enter a valid URL starting with http:// or https://",
            "warning"
          );
          return;
        }

        try {
          showToast("Fetching metadata...", "info");

          // Create a loading indicator
          const loadingDiv = document.createElement("div");
          loadingDiv.className = "loading";
          loadingDiv.innerHTML = '<div class="spinner"></div>';

          // Insert loading indicator after the URL input container
          const urlInputContainer = document.querySelector(
            ".url-input-container"
          );
          urlInputContainer.parentNode.insertBefore(
            loadingDiv,
            urlInputContainer.nextSibling
          );

          // Use a proxy to avoid CORS issues
          const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(
            url
          )}`;

          const response = await fetch(proxyUrl);
          const data = await response.json();

          if (!data.contents) {
            throw new Error("Failed to fetch URL content");
          }

          // Parse the HTML content
          const parser = new DOMParser();
          const doc = parser.parseFromString(data.contents, "text/html");

          // Extract metadata
          const title = doc.querySelector("title")?.textContent || "";
          const metaDescription =
            doc
              .querySelector('meta[name="description"]')
              ?.getAttribute("content") || "";
          const metaAuthor =
            doc.querySelector('meta[name="author"]')?.getAttribute("content") ||
            "";
          const metaPublisher =
            doc
              .querySelector('meta[property="og:site_name"]')
              ?.getAttribute("content") || "";
          const metaPublishedDate =
            doc
              .querySelector('meta[property="article:published_time"]')
              ?.getAttribute("content") || "";

          // Fill in the form fields
          document.getElementById("websiteTitle").value = title;
          document.getElementById("websiteAuthor").value = metaAuthor;
          document.getElementById("websitePublisher").value =
            metaPublisher || new URL(url).hostname.replace("www.", "");

          if (metaPublishedDate) {
            const publishedDate = new Date(metaPublishedDate);
            document.getElementById("websiteDate").value = publishedDate
              .toISOString()
              .split("T")[0];
          }

          document.getElementById("websiteUrl2").value = url;

          // Remove loading indicator
          loadingDiv.remove();

          showToast("Metadata fetched successfully!", "success");
        } catch (error) {
          console.error("Error fetching metadata:", error);

          // Remove loading indicator if it exists
          const loadingDiv = document.querySelector(".loading");
          if (loadingDiv) {
            loadingDiv.remove();
          }

          showToast(
            "Failed to fetch metadata. Please fill in the fields manually.",
            "error"
          );
        }
      }

      // Generate citation
      function generateCitation() {
        // Get active tab
        const activeTab = document
          .querySelector(".citation-tab.active")
          .getAttribute("data-tab");

        // Get active style
        const activeStyle = document
          .querySelector(".style-btn.active")
          .getAttribute("data-style");

        let citation = "";
        let preview = "";

        switch (activeTab) {
          case "website":
            citation = generateWebsiteCitation(activeStyle);
            break;
          case "book":
            citation = generateBookCitation(activeStyle);
            break;
          case "journal":
            citation = generateJournalCitation(activeStyle);
            break;
          case "newspaper":
            citation = generateNewspaperCitation(activeStyle);
            break;
          case "video":
            citation = generateVideoCitation(activeStyle);
            break;
        }

        if (!citation) {
          showToast("Please fill in all required fields", "warning");
          return;
        }

        // Display citation
        citationText.innerHTML = citation;

        // Create preview (formatted version)
        preview = formatCitationPreview(citation);
        previewContent.innerHTML = preview;

        // Show citation result
        citationResult.style.display = "block";

        // Scroll to citation result
        citationResult.scrollIntoView({ behavior: "smooth" });
      }

      // Generate website citation
      function generateWebsiteCitation(style) {
        const title = document.getElementById("websiteTitle").value.trim();
        const author = document.getElementById("websiteAuthor").value.trim();
        const publisher = document
          .getElementById("websitePublisher")
          .value.trim();
        const date = document.getElementById("websiteDate").value;
        const accessDate = document.getElementById("websiteAccessDate").value;
        const url = document.getElementById("websiteUrl2").value.trim();

        if (!title || !url) {
          showToast("Website title and URL are required", "warning");
          return "";
        }

        const formattedDate = date ? formatDate(date, style) : "";
        const formattedAccessDate = formatDate(accessDate, style);

        switch (style) {
          case "apa":
            return `${author ? author + ". " : ""}(${
              formattedDate || "n.d."
            }). <i>${title}</i>. ${
              publisher ? publisher + ". " : ""
            }Retrieved ${formattedAccessDate}, from ${url}`;

          case "mla":
            return `${
              author ? author + ". " : ""
            }"${title}." <i>${publisher}</i>${
              formattedDate ? ", " + formattedDate : ""
            }, ${url}. Accessed ${formattedAccessDate}.`;

          case "chicago":
            return `${author ? author + ". " : ""}"${title}." ${
              publisher ? publisher + ". " : ""
            }${
              formattedDate ? formattedDate + ". " : ""
            }Accessed ${formattedAccessDate}. ${url}.`;

          case "harvard":
            return `${author ? author + " " : ""}(${
              date ? date.split("-")[0] : "n.d."
            }). <i>${title}</i> [Online]. Available at: ${url} (Accessed: ${formattedAccessDate}).`;

          case "ieee":
            return `${author ? author + ", " : ""}"${title}," ${
              publisher ? publisher + ", " : ""
            }${
              formattedDate ? formattedDate + ". " : ""
            }[Online]. Available: ${url}. [Accessed: ${formattedAccessDate}].`;

          case "ama":
            return `${author ? author + ". " : ""}${title}. ${
              publisher ? publisher + ". " : ""
            }${
              formattedDate ? "Published " + formattedDate + ". " : ""
            }Accessed ${formattedAccessDate}. ${url}`;

          default:
            return `${author ? author + ". " : ""}(${
              formattedDate || "n.d."
            }). ${title}. Retrieved from ${url}`;
        }
      }

      // Generate book citation
      function generateBookCitation(style) {
        const title = document.getElementById("bookTitle").value.trim();
        const author = document.getElementById("bookAuthor").value.trim();
        const publisher = document.getElementById("bookPublisher").value.trim();
        const year = document.getElementById("bookYear").value.trim();
        const edition = document.getElementById("bookEdition").value.trim();
        const city = document.getElementById("bookCity").value.trim();
        const isbn = document.getElementById("bookIsbn").value.trim();

        if (!title || !author || !publisher || !year) {
          showToast(
            "Book title, author, publisher, and year are required",
            "warning"
          );
          return "";
        }

        switch (style) {
          case "apa":
            return `${author}. (${year}). <i>${title}</i>${
              edition ? " (" + edition + ")" : ""
            }. ${publisher}.`;

          case "mla":
            return `${author}. <i>${title}</i>${
              edition ? ", " + edition : ""
            }. ${publisher}, ${year}.`;

          case "chicago":
            return `${author}. <i>${title}</i>${
              edition ? ", " + edition : ""
            }. ${city ? city + ": " : ""}${publisher}, ${year}.`;

          case "harvard":
            return `${author} (${year}) <i>${title}</i>${
              edition ? ", " + edition : ""
            }. ${city ? city + ": " : ""}${publisher}.`;

          case "ieee":
            return `${author}, <i>${title}</i>${
              edition ? ", " + edition : ""
            }. ${city ? city + ": " : ""}${publisher}, ${year}.`;

          case "ama":
            return `${author}. <i>${title}</i>${
              edition ? ", " + edition : ""
            }. ${city ? city + ": " : ""}${publisher}; ${year}.`;

          default:
            return `${author}. (${year}). ${title}. ${publisher}.`;
        }
      }

      // Generate journal citation
      function generateJournalCitation(style) {
        const title = document.getElementById("journalTitle").value.trim();
        const author = document.getElementById("journalAuthor").value.trim();
        const journalName = document.getElementById("journalName").value.trim();
        const volume = document.getElementById("journalVolume").value.trim();
        const issue = document.getElementById("journalIssue").value.trim();
        const year = document.getElementById("journalYear").value.trim();
        const pages = document.getElementById("journalPages").value.trim();
        const doi = document.getElementById("journalDoi").value.trim();

        if (!title || !author || !journalName || !year) {
          showToast(
            "Article title, author, journal name, and year are required",
            "warning"
          );
          return "";
        }

        switch (style) {
          case "apa":
            return `${author}. (${year}). ${title}. <i>${journalName}</i>${
              volume ? ", " + volume : ""
            }${issue ? "(" + issue + ")" : ""}${pages ? ", " + pages : ""}${
              doi ? ". https://doi.org/" + doi : ""
            }.`;

          case "mla":
            return `${author}. "${title}." <i>${journalName}</i>${
              volume ? ", vol. " + volume : ""
            }${issue ? ", no. " + issue : ""}, ${year}${
              pages ? ", pp. " + pages : ""
            }.`;

          case "chicago":
            return `${author}. "${title}." <i>${journalName}</i> ${volume}${
              issue ? ", no. " + issue : ""
            } (${year})${pages ? ": " + pages : ""}.`;

          case "harvard":
            return `${author} (${year}) '${title}', <i>${journalName}</i>${
              volume ? ", " + volume : ""
            }${issue ? "(" + issue + ")" : ""}${
              pages ? ", pp. " + pages : ""
            }.`;

          case "ieee":
            return `${author}, "${title}," <i>${journalName}</i>${
              volume ? ", vol. " + volume : ""
            }${issue ? ", no. " + issue : ""}${
              pages ? ", pp. " + pages : ""
            }, ${year}.`;

          case "ama":
            return `${author}. ${title}. <i>${journalName}</i>. ${year}${
              volume ? ";" + volume : ""
            }${issue ? "(" + issue + ")" : ""}${pages ? ":" + pages : ""}.`;

          default:
            return `${author}. (${year}). ${title}. ${journalName}, ${volume}(${issue}), ${pages}.`;
        }
      }

      // Generate newspaper citation
      function generateNewspaperCitation(style) {
        const title = document.getElementById("newspaperTitle").value.trim();
        const author = document.getElementById("newspaperAuthor").value.trim();
        const newspaperName = document
          .getElementById("newspaperName")
          .value.trim();
        const date = document.getElementById("newspaperDate").value;
        const pages = document.getElementById("newspaperPages").value.trim();
        const url = document.getElementById("newspaperUrl").value.trim();

        if (!title || !newspaperName || !date) {
          showToast(
            "Article title, newspaper name, and date are required",
            "warning"
          );
          return "";
        }

        const formattedDate = formatDate(date, style);

        switch (style) {
          case "apa":
            return `${
              author ? author + ". " : ""
            }(${formattedDate}). ${title}. <i>${newspaperName}</i>${
              pages ? ", " + pages : ""
            }${url ? ". " + url : ""}.`;

          case "mla":
            return `${
              author ? author + ". " : ""
            }"${title}." <i>${newspaperName}</i>, ${formattedDate}${
              pages ? ", p. " + pages : ""
            }${url ? ", " + url : ""}.`;

          case "chicago":
            return `${
              author ? author + ". " : ""
            }"${title}." <i>${newspaperName}</i>, ${formattedDate}${
              pages ? ", " + pages : ""
            }.`;

          case "harvard":
            return `${author ? author + " " : ""}(${
              date.split("-")[0]
            }). '${title}', <i>${newspaperName}</i>, ${formattedDate}${
              pages ? ", p. " + pages : ""
            }${url ? ". Available at: " + url : ""}.`;

          case "ieee":
            return `${
              author ? author + ", " : ""
            }"${title}," <i>${newspaperName}</i>, ${formattedDate}${
              pages ? ", p. " + pages : ""
            }.`;

          case "ama":
            return `${
              author ? author + ". " : ""
            }${title}. <i>${newspaperName}</i>. ${formattedDate}${
              pages ? ":" + pages : ""
            }.`;

          default:
            return `${
              author ? author + ". " : ""
            }(${formattedDate}). ${title}. ${newspaperName}${
              pages ? ", " + pages : ""
            }.`;
        }
      }

      // Generate video citation
      function generateVideoCitation(style) {
        const title = document.getElementById("videoTitle").value.trim();
        const author = document.getElementById("videoAuthor").value.trim();
        const publisher = document
          .getElementById("videoPublisher")
          .value.trim();
        const date = document.getElementById("videoDate").value;
        const duration = document.getElementById("videoDuration").value.trim();
        const url = document.getElementById("videoUrl").value.trim();

        if (!title || !url) {
          showToast("Video title and URL are required", "warning");
          return "";
        }

        const formattedDate = date ? formatDate(date, style) : "";

        switch (style) {
          case "apa":
            return `${author ? author + ". " : ""}(${
              formattedDate || "n.d."
            }). <i>${title}</i> [Video]${
              publisher ? ". " + publisher : ""
            }. ${url}`;

          case "mla":
            return `${
              author ? author + ". " : ""
            }"${title}." <i>${publisher}</i>, ${formattedDate}${
              duration ? ", " + duration : ""
            }. ${url}.`;

          case "chicago":
            return `${
              author ? author + ". " : ""
            }"${title}." ${publisher}, ${formattedDate}. Video, ${duration}. ${url}.`;

          case "harvard":
            return `${author ? author + " " : ""}(${
              date ? date.split("-")[0] : "n.d."
            }). <i>${title}</i> [Online Video]${
              publisher ? ". " + publisher : ""
            }. Available at: ${url} (Accessed: ${formatDate(
              new Date().toISOString().split("T")[0],
              "harvard"
            )}).`;

          case "ieee":
            return `${
              author ? author + ", " : ""
            }"${title}," ${publisher}, ${formattedDate}. [Video]. Available: ${url}.`;

          case "ama":
            return `${
              author ? author + ". " : ""
            }${title} [video]. ${publisher}; ${formattedDate}. ${url}`;

          default:
            return `${author ? author + ". " : ""}(${
              formattedDate || "n.d."
            }). ${title} [Video]. ${url}`;
        }
      }

      // Format date based on citation style
      function formatDate(dateString, style) {
        if (!dateString) return "";

        const date = new Date(dateString);
        const year = date.getFullYear();
        const month = date.getMonth();
        const day = date.getDate();

        const months = [
          "January",
          "February",
          "March",
          "April",
          "May",
          "June",
          "July",
          "August",
          "September",
          "October",
          "November",
          "December",
        ];

        const shortMonths = [
          "Jan.",
          "Feb.",
          "Mar.",
          "Apr.",
          "May",
          "Jun.",
          "Jul.",
          "Aug.",
          "Sep.",
          "Oct.",
          "Nov.",
          "Dec.",
        ];

        switch (style) {
          case "apa":
            return `${year}, ${months[month]} ${day}`;

          case "mla":
            return `${day} ${months[month]} ${year}`;

          case "chicago":
            return `${months[month]} ${day}, ${year}`;

          case "harvard":
            return `${day} ${months[month]} ${year}`;

          case "ieee":
            return `${months[month]} ${day}, ${year}`;

          case "ama":
            return `${months[month]} ${day}, ${year}`;

          default:
            return `${year}-${(month + 1).toString().padStart(2, "0")}-${day
              .toString()
              .padStart(2, "0")}`;
        }
      }

      // Format citation preview
      function formatCitationPreview(citation) {
        // Add hanging indent and other formatting
        return citation;
      }

      // Copy citation to clipboard
      function copyToClipboard() {
        // Get citation text without HTML tags
        const tempElement = document.createElement("div");
        tempElement.innerHTML = citationText.innerHTML;
        const plainText = tempElement.textContent || tempElement.innerText;

        navigator.clipboard
          .writeText(plainText)
          .then(() => {
            showToast("Citation copied to clipboard!", "success");

            // Change button text temporarily
            copyBtn.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
            Copied!
          `;

            setTimeout(() => {
              copyBtn.innerHTML = `
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
              Copy
            `;
            }, 2000);
          })
          .catch((err) => {
            console.error("Failed to copy text: ", err);
            showToast("Failed to copy citation", "error");
          });
      }

      // Save citation
      function saveCitation() {
        // Get active style
        const activeStyle = document
          .querySelector(".style-btn.active")
          .getAttribute("data-style");

        // Get active tab
        const activeTab = document
          .querySelector(".citation-tab.active")
          .getAttribute("data-tab");

        // Get citation text
        const citation = citationText.innerHTML;

        // Get title based on active tab
        let title = "";
        switch (activeTab) {
          case "website":
            title = document.getElementById("websiteTitle").value.trim();
            break;
          case "book":
            title = document.getElementById("bookTitle").value.trim();
            break;
          case "journal":
            title = document.getElementById("journalTitle").value.trim();
            break;
          case "newspaper":
            title = document.getElementById("newspaperTitle").value.trim();
            break;
          case "video":
            title = document.getElementById("videoTitle").value.trim();
            break;
        }

        // Create citation object
        const citationObj = {
          id: Date.now(),
          title,
          citation,
          style: activeStyle.toUpperCase(),
          type: activeTab,
          date: new Date().toISOString(),
        };

        // Get saved citations from localStorage
        const savedCitations = JSON.parse(
          localStorage.getItem("savedCitations") || "[]"
        );

        // Add new citation
        savedCitations.push(citationObj);

        // Save to localStorage
        localStorage.setItem("savedCitations", JSON.stringify(savedCitations));

        // Update saved citations list
        loadSavedCitations();

        showToast("Citation saved successfully!", "success");
      }

      // Load saved citations
      function loadSavedCitations() {
        // Get saved citations from localStorage
        const savedCitations = JSON.parse(
          localStorage.getItem("savedCitations") || "[]"
        );

        if (savedCitations.length === 0) {
          savedCitationsList.innerHTML =
            '<p class="no-citations">No saved citations yet.</p>';
          return;
        }

        // Sort by date (newest first)
        savedCitations.sort((a, b) => new Date(b.date) - new Date(a.date));

        // Generate HTML
        let html = "";

        savedCitations.forEach((citation) => {
          html += `
          <div class="citation-item" data-id="${citation.id}">
            <div class="citation-item-header">
              <div class="citation-item-title">${citation.title}</div>
              <div class="citation-item-style">${citation.style}</div>
            </div>
            <div class="citation-item-text">${citation.citation}</div>
            <div class="citation-item-actions">
              <button class="action-btn" onclick="deleteCitation(${citation.id})">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="3 6 5 6 21 6"></polyline>
                  <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                  <line x1="10" y1="11" x2="10" y2="17"></line>
                  <line x1="14" y1="11" x2="14" y2="17"></line>
                </svg>
                Delete
              </button>
              <button class="action-btn copy" onclick="copySavedCitation(${citation.id})">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                </svg>
                Copy
              </button>
            </div>
          </div>
        `;
        });

        savedCitationsList.innerHTML = html;
      }

      // Delete citation
      function deleteCitation(id) {
        if (confirm("Are you sure you want to delete this citation?")) {
          // Get saved citations from localStorage
          const savedCitations = JSON.parse(
            localStorage.getItem("savedCitations") || "[]"
          );

          // Filter out the citation to delete
          const updatedCitations = savedCitations.filter(
            (citation) => citation.id !== id
          );

          // Save to localStorage
          localStorage.setItem(
            "savedCitations",
            JSON.stringify(updatedCitations)
          );

          // Update saved citations list
          loadSavedCitations();

          showToast("Citation deleted successfully!", "success");
        }
      }

      // Copy saved citation
      function copySavedCitation(id) {
        // Get saved citations from localStorage
        const savedCitations = JSON.parse(
          localStorage.getItem("savedCitations") || "[]"
        );

        // Find the citation to copy
        const citation = savedCitations.find((citation) => citation.id === id);

        if (!citation) {
          showToast("Citation not found", "error");
          return;
        }

        // Get citation text without HTML tags
        const tempElement = document.createElement("div");
        tempElement.innerHTML = citation.citation;
        const plainText = tempElement.textContent || tempElement.innerText;

        navigator.clipboard
          .writeText(plainText)
          .then(() => {
            showToast("Citation copied to clipboard!", "success");
          })
          .catch((err) => {
            console.error("Failed to copy text: ", err);
            showToast("Failed to copy citation", "error");
          });
      }

      // Replace all alert() calls with showToast()
      window.originalAlert = window.alert;
      window.alert = function (message) {
        showToast(message, "warning");
      };
    </script>
    <script src="/js/script.js"></script>
    <script src="../nav/nav.js"></script>
  </body>
</html>
